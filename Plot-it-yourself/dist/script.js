(()=>{"use strict";class t{constructor(){this.playerContainer=document.querySelector("#playerContainer"),this.opponentContainer=document.querySelector("#opponentContainer"),this.playerName=document.querySelector("#playerName"),this.opponentName=document.querySelector("#opponentName"),this.playerInfo=document.querySelector("#playerInfo"),this.opponentInfo=document.querySelector("#opponentInfo"),this.playerText=document.querySelector("#playerText"),this.opponentText=document.querySelector("#opponentText")}setPlayerText(t,e){if(1===t){const t=e.split("");this.playerText.innerHTML="";for(let e=0;e<t.length;e++){let n=`<div class="text-letter">${t[e]}</div>`;this.playerText.insertAdjacentHTML("beforeend",n)}}if(2===t){const t=e.split("");this.opponentText.innerHTML="";for(let e=0;e<t.length;e++){let n=`<div class="text-letter">${t[e]}</div>`;this.opponentText.insertAdjacentHTML("beforeend",n)}}}setPlayerNames(t,e){this.playerName.textContent=t,this.playerName=t,this.opponentName.textContent=e,this.opponentName=e}setPlayerStepInfo(t,e=0,n="",s=""){1===t&&(this.playerInfo.innerHTML=`\n        <b>Ход ${e}:</b> игрок \n        <b>\n          ${this.playerName.textContent} <br>\n          <span class="message" data-color="${s}">${n}</span>\n        </b>\n      `),2===t&&(this.opponentInfo.innerHTML=`\n        <b>Ход ${e}:</b> оппонент \n        <b>\n          ${this.opponentName.textContent} <br>\n          <span class="message" data-color="${s}">${n}</span>\n        </b>\n      `)}highlightPlayerText(t,e=""){1===t&&(this.playerText.dataset.color=e),2===t&&(this.opponentText.dataset.color=e)}highlightPlayerLetters(t,e,n,s=1){let i=n;for(let n=0;n<s;n++){const n=`.text-letter:nth-child(${i+1})`;let s;1===t&&(s=this.playerText.querySelector(n)),2===t&&(s=this.opponentText.querySelector(n)),s&&setTimeout((()=>s.dataset.color=e),5),i++}}}class e{constructor(){this.renderer=new t}setStep(t,e){const n=this.getStepData(t,e);if(n)switch(n.typeMove){case"N":this.startStep(t,e);break;case"L":this.lengthStep(t,e);break;case"G":"O"===n.moveResult?this.outOfBoundsStep(t,e):this.getCharStep(t,e);break;case"S":"O"===n.moveResult?this.outOfBoundsStep(t,e):this.setCharStep(t,e);break;case"D":"O"===n.moveResult?this.outOfBoundsStep(t,e):this.deleteCharsStep(t,e);break;case"F":"F"===n.moveResult?this.notFoundStep(t,e):this.findStrStep(t,e);break;case"I":"O"===n.moveResult?this.outOfBoundsStep(t,e):this.insCharStep(t,e)}}getStepData(t,e){return 1===t?window.gameConfig.playerSteps[e]:2===t?window.gameConfig.opponentSteps[e]:void 0}startStep(t,e){const n=this.getStepData(t,e);n&&(this.renderer.setPlayerText(t,n.text),this.renderer.setPlayerStepInfo(t,e,"начал задачу","orange"),this.renderer.highlightPlayerText(t))}lengthStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=`\n      получил длину текста в ${n.text.length} символов\n    `,i="orange";this.renderer.setPlayerText(t,n.text),this.renderer.setPlayerStepInfo(t,e,s,i),this.renderer.highlightPlayerText(t,i)}getCharStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text,i=n.position,o=`\n      получил символ '${s[i]}' на позиции ${i}\n    `,r="blue";this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,o,r),this.renderer.highlightPlayerText(t),this.renderer.highlightPlayerLetters(t,r,i)}setCharStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text,i=n.position,o=`\n      установил символ '${s[i]}' на позицию ${i}\n    `,r="green";this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,o,r),this.renderer.highlightPlayerText(t),this.renderer.highlightPlayerLetters(t,r,i)}deleteCharsStep(t,e){const n=this.getStepData(t,e-1),s=this.getStepData(t,e);if(!n||!s)return;const i=n.text,o=s.position,r=i.length-s.text.length,a=`\n      удалил ${r} символов на позиции ${o}\n    `;this.renderer.setPlayerText(t,i),this.renderer.setPlayerStepInfo(t,e,a,"red"),this.renderer.highlightPlayerText(t),this.renderer.highlightPlayerLetters(t,"red",o,r)}findStrStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text,i=n.position,o=`\n      обнаружил искомую строку на позиции ${i}\n    `,r="blue";this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,o,r),this.renderer.highlightPlayerText(t),this.renderer.highlightPlayerLetters(t,r,i)}insCharStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text,i=n.position,o=`\n      вставил символ '${s[i]}' на позицию ${i}\n    `,r="green";this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,o,r),this.renderer.highlightPlayerText(t),this.renderer.highlightPlayerLetters(t,r,i)}outOfBoundsStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text;this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,"\n      вышел за пределы строки\n    ","red"),this.renderer.highlightPlayerText(t,"red")}notFoundStep(t,e){const n=this.getStepData(t,e);if(!n)return;const s=n.text;this.renderer.setPlayerText(t,s),this.renderer.setPlayerStepInfo(t,e,"\n      не нашел искомый элемент\n    ","red"),this.renderer.highlightPlayerText(t,"red")}}class n{constructor(t){this.winners=t||window.gameConfig.winners,this.component=this.getComponent()}getWinnerHTML(){const t=window.gameConfig.playerId,e=window.gameConfig.opponentId,n=window.gameConfig.playerName,s=window.gameConfig.opponentName;let i="",o="";this.winners[0]===t?(i=n,o=s):this.winners[0]===e&&(i=s,o=n);const r=`\n      <p><span class="winner">Победитель: </span><b>${i}</b></p>\n      <p><span class="loser">Проигравший: </span><b>${o}</b></p>\n    `,a=`\n      <p class="winner">\n        Игроки <b>${n}</b> и <b>${s}</b> сыграли вничью\n      </p>\n    `,l=`\n      <p class="loser">\n        Игроки <b>${n}</b> и <b>${s}</b> потерпели поражение\n      </p>\n    `;switch(this.winners[2]){case 0:return r;case 1:return a;case 2:return l;default:return""}}open(){const t=document.querySelector("#winnerModal");t&&(t.style.display="block");const e=document.querySelector("#winnerModalCloseBtn");e&&(e.onclick=()=>this.close())}close(){const t=document.querySelector("#winnerModal");t&&(t.style.display="none")}getComponent(){if(this.component)return this.component;const t=document.createElement("div");return t.id="winnerModal",t.className="winner-modal",t.innerHTML=`\n      <div id="winnerModalContent" class="winner-modal-content">\n        <span id="winnerModalCloseBtn" class="close-btn">x</span>\n        <div id="winnerModalHeading">\n          <h3 class="winner-heading">Результат игры</h3>\n          ${this.getWinnerHTML()}\n        </div>\n      </div>\n    `,t}}class s{constructor(){this.rewindButton=document.querySelector("#rewind"),this.prevButton=document.querySelector("#prev"),this.playButton=document.querySelector("#play"),this.nextButton=document.querySelector("#next"),this.forwardButton=document.querySelector("#forward"),this.tooltipPlay=document.querySelector("#tooltipTextPlay"),this.tooltipPause=document.querySelector("#tooltipTextPause"),this.tooltipRestart=document.querySelector("#tooltipTextRestart"),this.iconPlay=document.querySelector("#iconPlay"),this.iconPause=document.querySelector("#iconPause"),this.iconRestart=document.querySelector("#iconRestart")}setButtonsDisability(t="all",e=!0){switch(t){case"left":this.rewindButton.disabled=e,this.prevButton.disabled=e;break;case"right":this.nextButton.disabled=e,this.forwardButton.disabled=e;break;case"all":this.rewindButton.disabled=e,this.prevButton.disabled=e,this.nextButton.disabled=e,this.forwardButton.disabled=e}}setPlayButtonIcon(t="play"){let e="none",n="none",s="none";const i="none",o="inline-block";switch(t){case"play":e=o,n=i,s=i;break;case"pause":e=i,n=o,s=i;break;case"restart":e=i,n=i,s=o}this.tooltipPlay.style.display=e,this.tooltipPause.style.display=n,this.tooltipRestart.style.display=s,this.iconPlay.style.display=e,this.iconPause.style.display=n,this.iconRestart.style.display=s,this.playButton.dataset.status=t}}class i{constructor(){this.player=1,this.opponent=2,this.playerStep=-1,this.opponentStep=-1,this.timerDelay=1e3,this.timerID=0,this.stepsCount=window.gameConfig.stepsCount,this.lastPlayerStep=window.gameConfig.playerSteps.length-1,this.lastOpponentStep=window.gameConfig.opponentSteps.length-1,this.maxNumberOfSteps=window.gameConfig.maxSteps,this.lastPlayerStep>=this.lastOpponentStep?this.maxSteps=this.lastPlayerStep:this.maxSteps=this.lastOpponentStep,this.stepController=new e,this.winnerModal=new n,this.visualizer=new s}handleEvent(t){if("click"===t.type){const e=t.target.closest("#rewind"),n=t.target.closest("#prev"),s=t.target.closest("#play"),i=t.target.closest("#next"),o=t.target.closest("#forward");if(e&&!e.disabled)this.rewind();else if(n&&!n.disabled)this.prev();else if(s)switch(s.dataset.status){case"play":this.play(this.playerStep,this.opponentStep);break;case"pause":this.pause();break;case"restart":this.restart()}else i&&!i.disabled?this.next():o&&!o.disabled&&this.forward()}}setButtonsState(){0===this.playerStep&&0===this.opponentStep?this.visualizer.setButtonsDisability("left",!0):this.visualizer.setButtonsDisability("left",!1),this.playerStep===this.lastPlayerStep&&this.opponentStep===this.lastOpponentStep?this.visualizer.setButtonsDisability("right",!0):this.visualizer.setButtonsDisability("right",!1)}setGameStep(){this.stepController.setStep(this.player,this.playerStep),this.stepController.setStep(this.opponent,this.opponentStep),this.setGameFinishVisibility()}setGameFinishVisibility(){const t="Превышено максимальное количество ходов",e="Задача завершена",n=document.querySelector("#playerFinish");n&&this.playerStep===this.lastPlayerStep?(n.style.visibility="visible",this.lastPlayerStep>this.maxNumberOfSteps?n.textContent=t:n.textContent=e):n.style.visibility="hidden";const s=document.querySelector("#opponentFinish");s&&this.opponentStep===this.lastOpponentStep?(s.style.visibility="visible",this.lastOpponentStep>this.maxNumberOfSteps?s.textContent=t:s.textContent=e):s.style.visibility="hidden"}isFinished(){return this.playerStep+this.opponentStep>=this.stepsCount}play(t=0,e=0){this.visualizer.setButtonsDisability("all",!0),this.visualizer.setPlayButtonIcon("pause"),this.playerStep=t>0?t:0,this.opponentStep=e>0?e:0,this.setGameStep(),this.intervalID=setInterval((()=>{this.isFinished()&&(clearInterval(this.intervalID),this.intervalID=0,this.visualizer.setPlayButtonIcon("restart"),this.setButtonsState(),this.winnerModal.open()),this.playerStep<this.lastPlayerStep&&(this.playerStep++,this.stepController.setStep(this.player,this.playerStep)),this.opponentStep<this.lastOpponentStep&&(this.opponentStep++,this.stepController.setStep(this.opponent,this.opponentStep)),this.setGameFinishVisibility()}),this.timerDelay)}pause(){this.intervalID&&(clearInterval(this.intervalID),this.intervalID=0),this.visualizer.setPlayButtonIcon("play"),this.setButtonsState()}restart(){this.playerStep=0,this.opponentStep=0,this.play()}rewind(){this.playerStep=0,this.opponentStep=0,this.setButtonsState(),this.setGameStep()}prev(){let t=!1,e=!1;this.playerStep>0&&this.playerStep>=this.opponentStep&&(t=!0),this.opponentStep>0&&this.opponentStep>=this.playerStep&&(e=!0),t&&this.playerStep--,e&&this.opponentStep--,this.setButtonsState(),this.setGameStep()}next(){this.playerStep<this.lastPlayerStep&&this.playerStep++,this.opponentStep<this.lastOpponentStep&&this.opponentStep++,this.setButtonsState(),this.setGameStep(),this.isFinished()&&(this.visualizer.setPlayButtonIcon("restart"),this.winnerModal.open())}forward(){this.playerStep=this.lastPlayerStep,this.opponentStep=this.lastOpponentStep,this.visualizer.setPlayButtonIcon("restart"),this.setButtonsState(),this.setGameStep(),this.winnerModal.open()}}class o{constructor(t){this.iconType=t}getIconHTML(){switch(this.iconType){case"prev":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M19,5V19H16V5M14,5V19L3,12"></path>\n      </svg>\n    ';case"next":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M5,5V19H8V5M10,5V19L21,12"></path>\n      </svg>\n    ';case"rewind":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M17,5H14V19H17V5M12,5L1,12L12,19V5M22,5H19V19H22V5Z"></path>\n      </svg>\n    ';case"forward":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M7,5H10V19H7V5M12,5L23,12L12,19V5M2,5H5V19H2V5Z"></path>\n      </svg>\n    ';case"play":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M8,5.14V19.14L19,12.14L8,5.14Z"></path>\n      </svg>\n    ';case"restart":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"></path>\n      </svg>\n    ';case"pause":return'\n      <svg style="width:24px;height:24px;" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M14,19H18V5H14M6,19H10V5H6V19Z"></path>\n      </svg>\n    '}}}class r{getComponent(){const t=document.createElement("div");return t.className="container buttons-container",t.innerHTML=`\n      <div class="tooltip">\n        ${this.getRewindButton(!0).outerHTML}\n        <span class="tooltip-text">Перемотать в начало</span>\n      </div>\n      <div class="tooltip">\n        ${this.getPrevButton(!0).outerHTML}\n        <span class="tooltip-text">Шаг назад</span>\n      </div>\n      <div class="tooltip">\n        ${this.getPlayButton().outerHTML}\n        <span \n          id="tooltipTextRestart"\n          class="tooltip-text"\n          style="display: none">\n          Рестарт\n        </span>\n        <span \n          id="tooltipTextPlay"\n          class="tooltip-text"\n          style="display: inline-block">\n          Запустить\n        </span>\n        <span \n          id="tooltipTextPause"\n          class="tooltip-text"\n          style="display: none">\n          Пауза\n        </span>\n      </div>\n      <div class="tooltip">\n        ${this.getNextButton().outerHTML}\n        <span class="tooltip-text">Шаг вперед</span>\n      </div>\n      <div class="tooltip">\n        ${this.getForwardButton().outerHTML}\n        <span class="tooltip-text">Перемотать в конец</span>\n      </div>\n    `,t}getPrevButton(t=!1){const e=document.createElement("button");return e.id="prev",e.className="btn",t&&(e.disabled=!0),e.innerHTML=new o("prev").getIconHTML(),e}getNextButton(t=!1){const e=document.createElement("button");return e.id="next",e.className="btn",t&&(e.disabled=!0),e.innerHTML=new o("next").getIconHTML(),e}getRewindButton(t=!1){const e=document.createElement("button");return e.id="rewind",e.className="btn",t&&(e.disabled=!0),e.innerHTML=new o("rewind").getIconHTML(),e}getForwardButton(t=!1){const e=document.createElement("button");return e.id="forward",e.className="btn",t&&(e.disabled=!0),e.innerHTML=new o("forward").getIconHTML(),e}getPlayButton(){const t=document.createElement("button");return t.id="play",t.className="btn",t.dataset.status="play",t.innerHTML=`\n      <span id="iconRestart" style="display:none;">\n        ${new o("restart").getIconHTML()}\n      </span>\n      <span id="iconPlay" style="display:inline-block;">\n        ${new o("play").getIconHTML()}\n      </span>\n      <span id="iconPause" style="display:none;">\n        ${new o("pause").getIconHTML()}\n      </span>\n    `,t}}class a{constructor(t){this.playerStr=1===t?"player":2===t?"opponent":"",this.component=this.getComponent(t)}getComponent(){if(this.component)return this.component;const t=document.createElement("div");return t.className="player-container",t.id=`${this.playerStr}Container`,t.innerHTML=`\n      <h4 id="${this.playerStr}Name" class="player-header"></h4>\n      <div id="${this.playerStr}Text" class="player-text"></div>\n      <div class="game-info" id="${this.playerStr}Info"></div>\n      <div class="game-finish" id="${this.playerStr}Finish"></div>\n    `,t}}class l{constructor(){this.component=this.getComponent(),this.numberOfTask=window.gameConfig.numberOfTask}getComponent(){const t=document.createElement("div");switch(t.id="taskInfo",t.className="task-info",this.numberOfTask){case 1:t.innerHTML="\n      <b>Задание 1: </b> удалить лишние и вставить необходимые пробелы\n    ";break;case 2:t.innerHTML="\n      <b>Задание 2: </b> заменить все слова “the” на слово “a” и слова\n      “The” на слово “A”\n    ";break;case 3:t.innerHTML="\n      <b>Задание 3: </b> удалить повторные вхождения в текст одних \n      и тех же слов\n    ";break;default:t.innerHTML=""}return t}}class p{constructor(){this.buttonsContainer=new r,this.player=1,this.opponent=2,this.playerTextBlock=new a(this.player),this.opponentTextBlock=new a(this.opponent),this.taskInfo=new l,this.winnerModal=new n,this.component=this.getComponent()}start(){document.body.append(this.component),this.component.querySelector(".buttons-container").addEventListener("click",new i);const e=new t;e.setPlayerNames(window.gameConfig.playerName,window.gameConfig.opponentName),e.setPlayerText(this.player,window.gameConfig.source),e.setPlayerText(this.opponent,window.gameConfig.source)}getComponent(){if(this.component)return this.component;const t=document.createElement("main");return t.className="main",t.innerHTML=`\n      ${this.buttonsContainer.getComponent().outerHTML}\n      <div class="container">\n        ${this.taskInfo.getComponent().outerHTML}\n      </div>\n      <div class="container">\n        ${this.playerTextBlock.getComponent().outerHTML}\n        ${this.opponentTextBlock.getComponent().outerHTML}\n      </div>\n      ${this.winnerModal.getComponent().outerHTML}\n    `,t}}!async function(){try{const t=await fetch("/game_config");if(!t.ok)throw console.log(`\n        Error ${t.status}: ${t.statusText}\n      `),Error(t.statusText);window.gameConfig=await t.json()}catch(t){console.error(t)}(new p).start()}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLbUUsY0FDeEIsQ0FFQTZHLFFBQ0U5SyxTQUFTK0ssS0FBS0MsT0FBT2xMLEtBQUtrRSxXQUNWbEUsS0FBS2tFLFVBQVUvRCxjQUFjLHNCQUNyQ2dMLGlCQUFpQixRQUFTLElBQUlyRSxHQUN0QyxNQUFNc0UsRUFBaUIsSUFBSXRMLEVBQzNCc0wsRUFBZTlKLGVBQ2IrQixPQUFPQyxXQUFXakQsV0FDbEJnRCxPQUFPQyxXQUFXaEQsY0FFcEI4SyxFQUFlekssY0FBY1gsS0FBSytHLE9BQVExRCxPQUFPQyxXQUFXK0gsUUFDNURELEVBQWV6SyxjQUFjWCxLQUFLZ0gsU0FBVTNELE9BQU9DLFdBQVcrSCxPQUNoRSxDQUVBbEgsZUFDRSxHQUFJbkUsS0FBS2tFLFVBQVcsT0FBT2xFLEtBQUtrRSxVQUNoQyxNQUFNb0gsRUFBT3BMLFNBQVNpRixjQUFjLFFBYXBDLE9BWkFtRyxFQUFLakcsVUFBWSxPQUNqQmlHLEVBQUt0SyxVQUFZLFdBQ2JoQixLQUFLMkosaUJBQWlCeEYsZUFBZTBGLHFEQUVuQzdKLEtBQUs0SyxTQUFTekcsZUFBZTBGLG1FQUc3QjdKLEtBQUs4SyxnQkFBZ0IzRyxlQUFlMEYsc0JBQ3BDN0osS0FBSytLLGtCQUFrQjVHLGVBQWUwRixrQ0FFeEM3SixLQUFLNkUsWUFBWVYsZUFBZTBGLGtCQUU3QnlCLENBQ1QsR0M1Q0ZDLGlCQUVFLElBQ0UsTUFBTUMsUUFBYUMsTUFGSixnQkFHZixJQUFLRCxFQUFLRSxHQUlSLE1BSEFDLFFBQVFDLElBQUksbUJBQ0ZKLEVBQUszRSxXQUFXMkUsRUFBS0ssc0JBRXpCQyxNQUFNTixFQUFLSyxZQUVuQnhJLE9BQU9DLGlCQUFtQmtJLEVBQUtPLE1BQ2pDLENBQUUsTUFBT0MsR0FDUEwsUUFBUU0sTUFBTUQsRUFDaEIsRUFFWSxJQUFJbkIsR0FDWkcsT0FDTixDQUVBQSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9jb21wb25lbnRzL3N0ZXAvU3RlcFZpc3VhbGl6ZXIuanMiLCJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9jb21wb25lbnRzL3N0ZXAvU3RlcENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9jb21wb25lbnRzL3dpbm5lci1tb2RhbC9XaW5uZXJNb2RhbC5qcyIsIndlYnBhY2s6Ly9wbG90LWl0LXlvdXJzZWxmLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9ucy9CdXR0b25WaXN1YWxpemVyLmpzIiwid2VicGFjazovL3Bsb3QtaXQteW91cnNlbGYvLi9zcmMvY29tcG9uZW50cy9idXR0b25zL0J1dHRvbkhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9jb21wb25lbnRzL2J1dHRvbnMvQnV0dG9uSWNvbi5qcyIsIndlYnBhY2s6Ly9wbG90LWl0LXlvdXJzZWxmLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9ucy9CdXR0b25zQ29udGFpbmVyLmpzIiwid2VicGFjazovL3Bsb3QtaXQteW91cnNlbGYvLi9zcmMvY29tcG9uZW50cy9wbGF5ZXItdGV4dC9QbGF5ZXJUZXh0LmpzIiwid2VicGFjazovL3Bsb3QtaXQteW91cnNlbGYvLi9zcmMvY29tcG9uZW50cy90YXNrLWluZm8vVGFza0luZm8uanMiLCJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9jb21wb25lbnRzL2FwcC9BcHAuanMiLCJ3ZWJwYWNrOi8vcGxvdC1pdC15b3Vyc2VsZi8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgU3RlcFZpc3VhbGl6ZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5wbGF5ZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyQ29udGFpbmVyJylcclxuICAgIHRoaXMub3Bwb25lbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3Bwb25lbnRDb250YWluZXInKVxyXG4gICAgdGhpcy5wbGF5ZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllck5hbWUnKVxyXG4gICAgdGhpcy5vcHBvbmVudE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3Bwb25lbnROYW1lJylcclxuICAgIHRoaXMucGxheWVySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5ZXJJbmZvJylcclxuICAgIHRoaXMub3Bwb25lbnRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wcG9uZW50SW5mbycpXHJcbiAgICB0aGlzLnBsYXllclRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyVGV4dCcpXHJcbiAgICB0aGlzLm9wcG9uZW50VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHBvbmVudFRleHQnKVxyXG4gIH1cclxuXHJcbiAgc2V0UGxheWVyVGV4dChwbGF5ZXJOdW0sIHRleHQpIHtcclxuICAgIGlmIChwbGF5ZXJOdW0gPT09IDEpIHtcclxuICAgICAgY29uc3QgcGxheWVyTGV0dGVycyA9IHRleHQuc3BsaXQoJycpXHJcbiAgICAgIHRoaXMucGxheWVyVGV4dC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllckxldHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgbGV0dGVyID0gcGxheWVyTGV0dGVyc1tpXVxyXG4gICAgICAgIGxldCBsZXR0ZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWxldHRlclwiPiR7bGV0dGVyfTwvZGl2PmBcclxuICAgICAgICB0aGlzLnBsYXllclRleHQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBsZXR0ZXJIVE1MKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocGxheWVyTnVtID09PSAyKSB7XHJcbiAgICAgIGNvbnN0IG9wcG9uZW50TGV0dGVycyA9IHRleHQuc3BsaXQoJycpXHJcbiAgICAgIHRoaXMub3Bwb25lbnRUZXh0LmlubmVySFRNTCA9ICcnXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3Bwb25lbnRMZXR0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGxldHRlciA9IG9wcG9uZW50TGV0dGVyc1tpXVxyXG4gICAgICAgIGxldCBsZXR0ZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWxldHRlclwiPiR7bGV0dGVyfTwvZGl2PmBcclxuICAgICAgICB0aGlzLm9wcG9uZW50VGV4dC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGxldHRlckhUTUwpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFBsYXllck5hbWVzKHBsYXllck5hbWUsIG9wcG9uZW50TmFtZSkge1xyXG4gICAgdGhpcy5wbGF5ZXJOYW1lLnRleHRDb250ZW50ID0gcGxheWVyTmFtZVxyXG4gICAgdGhpcy5wbGF5ZXJOYW1lID0gcGxheWVyTmFtZVxyXG4gICAgdGhpcy5vcHBvbmVudE5hbWUudGV4dENvbnRlbnQgPSBvcHBvbmVudE5hbWVcclxuICAgIHRoaXMub3Bwb25lbnROYW1lID0gb3Bwb25lbnROYW1lXHJcbiAgfVxyXG5cclxuICBzZXRQbGF5ZXJTdGVwSW5mbyhwbGF5ZXJOdW0sIHN0ZXAgPSAwLCBtZXNzYWdlID0gJycsIGNvbG9yID0gJycpIHtcclxuICAgIGlmIChwbGF5ZXJOdW0gPT09IDEpIHtcclxuICAgICAgdGhpcy5wbGF5ZXJJbmZvLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8Yj7QpdC+0LQgJHtzdGVwfTo8L2I+INC40LPRgNC+0LogXHJcbiAgICAgICAgPGI+XHJcbiAgICAgICAgICAke3RoaXMucGxheWVyTmFtZS50ZXh0Q29udGVudH0gPGJyPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXNzYWdlXCIgZGF0YS1jb2xvcj1cIiR7Y29sb3J9XCI+JHttZXNzYWdlfTwvc3Bhbj5cclxuICAgICAgICA8L2I+XHJcbiAgICAgIGBcclxuICAgIH1cclxuICAgIGlmIChwbGF5ZXJOdW0gPT09IDIpIHtcclxuICAgICAgdGhpcy5vcHBvbmVudEluZm8uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxiPtCl0L7QtCAke3N0ZXB9OjwvYj4g0L7Qv9C/0L7QvdC10L3RgiBcclxuICAgICAgICA8Yj5cclxuICAgICAgICAgICR7dGhpcy5vcHBvbmVudE5hbWUudGV4dENvbnRlbnR9IDxicj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVzc2FnZVwiIGRhdGEtY29sb3I9XCIke2NvbG9yfVwiPiR7bWVzc2FnZX08L3NwYW4+XHJcbiAgICAgICAgPC9iPlxyXG4gICAgICBgXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoaWdobGlnaHRQbGF5ZXJUZXh0KHBsYXllck51bSwgY29sb3IgPSAnJykge1xyXG4gICAgaWYgKHBsYXllck51bSA9PT0gMSkge1xyXG4gICAgICB0aGlzLnBsYXllclRleHQuZGF0YXNldC5jb2xvciA9IGNvbG9yXHJcbiAgICB9XHJcbiAgICBpZiAocGxheWVyTnVtID09PSAyKSB7XHJcbiAgICAgIHRoaXMub3Bwb25lbnRUZXh0LmRhdGFzZXQuY29sb3IgPSBjb2xvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGlnaGxpZ2h0UGxheWVyTGV0dGVycyhwbGF5ZXJOdW0sIGNvbG9yLCBwb3NpdGlvbiwgY291bnQgPSAxKSB7XHJcbiAgICBsZXQgY3VycmVudFBvcyA9IHBvc2l0aW9uXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgLnRleHQtbGV0dGVyOm50aC1jaGlsZCgke2N1cnJlbnRQb3MgKyAxfSlgXHJcbiAgICAgIGxldCBsZXR0ZXJcclxuICAgICAgaWYgKHBsYXllck51bSA9PT0gMSkgbGV0dGVyID0gdGhpcy5wbGF5ZXJUZXh0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICAgIGlmIChwbGF5ZXJOdW0gPT09IDIpIGxldHRlciA9IHRoaXMub3Bwb25lbnRUZXh0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICAgIGlmIChsZXR0ZXIpIHtcclxuICAgICAgICBsZXQgZGVsYXkgPSA1XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiAobGV0dGVyLmRhdGFzZXQuY29sb3IgPSBjb2xvciksIGRlbGF5KVxyXG4gICAgICB9XHJcbiAgICAgIGN1cnJlbnRQb3MrK1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTdGVwVmlzdWFsaXplciB9IGZyb20gJy4vU3RlcFZpc3VhbGl6ZXIuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgU3RlcENvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBTdGVwVmlzdWFsaXplcigpXHJcbiAgfVxyXG5cclxuICBzZXRTdGVwKHBsYXllck51bSwgc3RlcCkge1xyXG4gICAgY29uc3Qgc3RlcERhdGEgPSB0aGlzLmdldFN0ZXBEYXRhKHBsYXllck51bSwgc3RlcClcclxuICAgIGlmICghc3RlcERhdGEpIHJldHVyblxyXG4gICAgc3dpdGNoIChzdGVwRGF0YS50eXBlTW92ZSkge1xyXG4gICAgICBjYXNlICdOJzpcclxuICAgICAgICB0aGlzLnN0YXJ0U3RlcChwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnTCc6XHJcbiAgICAgICAgdGhpcy5sZW5ndGhTdGVwKHBsYXllck51bSwgc3RlcClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdHJzpcclxuICAgICAgICBpZiAoc3RlcERhdGEubW92ZVJlc3VsdCA9PT0gJ08nKSB7XHJcbiAgICAgICAgICB0aGlzLm91dE9mQm91bmRzU3RlcChwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICAgICAgfSBlbHNlIHRoaXMuZ2V0Q2hhclN0ZXAocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ1MnOlxyXG4gICAgICAgIGlmIChzdGVwRGF0YS5tb3ZlUmVzdWx0ID09PSAnTycpIHtcclxuICAgICAgICAgIHRoaXMub3V0T2ZCb3VuZHNTdGVwKHBsYXllck51bSwgc3RlcClcclxuICAgICAgICB9IGVsc2UgdGhpcy5zZXRDaGFyU3RlcChwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnRCc6XHJcbiAgICAgICAgaWYgKHN0ZXBEYXRhLm1vdmVSZXN1bHQgPT09ICdPJykge1xyXG4gICAgICAgICAgdGhpcy5vdXRPZkJvdW5kc1N0ZXAocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgICAgIH0gZWxzZSB0aGlzLmRlbGV0ZUNoYXJzU3RlcChwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnRic6XHJcbiAgICAgICAgaWYgKHN0ZXBEYXRhLm1vdmVSZXN1bHQgPT09ICdGJykge1xyXG4gICAgICAgICAgdGhpcy5ub3RGb3VuZFN0ZXAocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgICAgIH0gZWxzZSB0aGlzLmZpbmRTdHJTdGVwKHBsYXllck51bSwgc3RlcClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdJJzpcclxuICAgICAgICBpZiAoc3RlcERhdGEubW92ZVJlc3VsdCA9PT0gJ08nKSB7XHJcbiAgICAgICAgICB0aGlzLm91dE9mQm91bmRzU3RlcChwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICAgICAgfSBlbHNlIHRoaXMuaW5zQ2hhclN0ZXAocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTdGVwRGF0YShwbGF5ZXJOdW0sIHN0ZXApIHtcclxuICAgIGlmIChwbGF5ZXJOdW0gPT09IDEpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5nYW1lQ29uZmlnLnBsYXllclN0ZXBzW3N0ZXBdXHJcbiAgICB9XHJcbiAgICBpZiAocGxheWVyTnVtID09PSAyKSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cuZ2FtZUNvbmZpZy5vcHBvbmVudFN0ZXBzW3N0ZXBdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGFydFN0ZXAocGxheWVyTnVtLCBzdGVwKSB7XHJcbiAgICBjb25zdCBzdGVwRGF0YSA9IHRoaXMuZ2V0U3RlcERhdGEocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgaWYgKCFzdGVwRGF0YSkgcmV0dXJuXHJcbiAgICBjb25zdCBpbml0U3RlcE1lc3NhZ2UgPSAn0L3QsNGH0LDQuyDQt9Cw0LTQsNGH0YMnXHJcbiAgICBjb25zdCBjb2xvciA9ICdvcmFuZ2UnXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclRleHQocGxheWVyTnVtLCBzdGVwRGF0YS50ZXh0KVxyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJTdGVwSW5mbyhwbGF5ZXJOdW0sIHN0ZXAsIGluaXRTdGVwTWVzc2FnZSwgY29sb3IpXHJcbiAgICB0aGlzLnJlbmRlcmVyLmhpZ2hsaWdodFBsYXllclRleHQocGxheWVyTnVtKVxyXG4gIH1cclxuXHJcbiAgbGVuZ3RoU3RlcChwbGF5ZXJOdW0sIHN0ZXApIHtcclxuICAgIGNvbnN0IHN0ZXBEYXRhID0gdGhpcy5nZXRTdGVwRGF0YShwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICBpZiAoIXN0ZXBEYXRhKSByZXR1cm5cclxuICAgIGNvbnN0IGxlbmd0aFN0ZXBNZXNzYWdlID0gYFxyXG4gICAgICDQv9C+0LvRg9GH0LjQuyDQtNC70LjQvdGDINGC0LXQutGB0YLQsCDQsiAke3N0ZXBEYXRhLnRleHQubGVuZ3RofSDRgdC40LzQstC+0LvQvtCyXHJcbiAgICBgXHJcbiAgICBjb25zdCBjb2xvciA9ICdvcmFuZ2UnXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclRleHQocGxheWVyTnVtLCBzdGVwRGF0YS50ZXh0KVxyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJTdGVwSW5mbyhwbGF5ZXJOdW0sIHN0ZXAsIGxlbmd0aFN0ZXBNZXNzYWdlLCBjb2xvcilcclxuICAgIHRoaXMucmVuZGVyZXIuaGlnaGxpZ2h0UGxheWVyVGV4dChwbGF5ZXJOdW0sIGNvbG9yKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2hhclN0ZXAocGxheWVyTnVtLCBzdGVwKSB7XHJcbiAgICBjb25zdCBzdGVwRGF0YSA9IHRoaXMuZ2V0U3RlcERhdGEocGxheWVyTnVtLCBzdGVwKVxyXG4gICAgaWYgKCFzdGVwRGF0YSkgcmV0dXJuXHJcbiAgICBjb25zdCB0ZXh0ID0gc3RlcERhdGEudGV4dFxyXG4gICAgY29uc3QgcG9zaXRpb24gPSBzdGVwRGF0YS5wb3NpdGlvblxyXG4gICAgY29uc3QgZ2V0Q2hhclN0ZXBNZXNzYWdlID0gYFxyXG4gICAgICDQv9C+0LvRg9GH0LjQuyDRgdC40LzQstC+0LsgJyR7dGV4dFtwb3NpdGlvbl19JyDQvdCwINC/0L7Qt9C40YbQuNC4ICR7cG9zaXRpb259XHJcbiAgICBgXHJcbiAgICBjb25zdCBjb2xvciA9ICdibHVlJ1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJUZXh0KHBsYXllck51bSwgdGV4dClcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyU3RlcEluZm8ocGxheWVyTnVtLCBzdGVwLCBnZXRDaGFyU3RlcE1lc3NhZ2UsIGNvbG9yKVxyXG4gICAgdGhpcy5yZW5kZXJlci5oaWdobGlnaHRQbGF5ZXJUZXh0KHBsYXllck51bSlcclxuICAgIHRoaXMucmVuZGVyZXIuaGlnaGxpZ2h0UGxheWVyTGV0dGVycyhwbGF5ZXJOdW0sIGNvbG9yLCBwb3NpdGlvbilcclxuICB9XHJcblxyXG4gIHNldENoYXJTdGVwKHBsYXllck51bSwgc3RlcCkge1xyXG4gICAgY29uc3Qgc3RlcERhdGEgPSB0aGlzLmdldFN0ZXBEYXRhKHBsYXllck51bSwgc3RlcClcclxuICAgIGlmICghc3RlcERhdGEpIHJldHVyblxyXG4gICAgY29uc3QgdGV4dCA9IHN0ZXBEYXRhLnRleHRcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gc3RlcERhdGEucG9zaXRpb25cclxuICAgIGNvbnN0IHNldENoYXJTdGVwTWVzc2FnZSA9IGBcclxuICAgICAg0YPRgdGC0LDQvdC+0LLQuNC7INGB0LjQvNCy0L7QuyAnJHt0ZXh0W3Bvc2l0aW9uXX0nINC90LAg0L/QvtC30LjRhtC40Y4gJHtwb3NpdGlvbn1cclxuICAgIGBcclxuICAgIGNvbnN0IGNvbG9yID0gJ2dyZWVuJ1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJUZXh0KHBsYXllck51bSwgdGV4dClcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyU3RlcEluZm8ocGxheWVyTnVtLCBzdGVwLCBzZXRDaGFyU3RlcE1lc3NhZ2UsIGNvbG9yKVxyXG4gICAgdGhpcy5yZW5kZXJlci5oaWdobGlnaHRQbGF5ZXJUZXh0KHBsYXllck51bSlcclxuICAgIHRoaXMucmVuZGVyZXIuaGlnaGxpZ2h0UGxheWVyTGV0dGVycyhwbGF5ZXJOdW0sIGNvbG9yLCBwb3NpdGlvbilcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNoYXJzU3RlcChwbGF5ZXJOdW0sIHN0ZXApIHtcclxuICAgIGNvbnN0IHN0ZXBEYXRhUHJldiA9IHRoaXMuZ2V0U3RlcERhdGEocGxheWVyTnVtLCBzdGVwIC0gMSlcclxuICAgIGNvbnN0IHN0ZXBEYXRhID0gdGhpcy5nZXRTdGVwRGF0YShwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICBpZiAoIXN0ZXBEYXRhUHJldiB8fCAhc3RlcERhdGEpIHJldHVyblxyXG4gICAgY29uc3QgdGV4dCA9IHN0ZXBEYXRhUHJldi50ZXh0XHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IHN0ZXBEYXRhLnBvc2l0aW9uXHJcbiAgICBjb25zdCBjb3VudCA9IHRleHQubGVuZ3RoIC0gc3RlcERhdGEudGV4dC5sZW5ndGhcclxuICAgIGNvbnN0IGRlbGV0ZUNoYXJzU3RlcE1lc3NhZ2UgPSBgXHJcbiAgICAgINGD0LTQsNC70LjQuyAke2NvdW50fSDRgdC40LzQstC+0LvQvtCyINC90LAg0L/QvtC30LjRhtC40LggJHtwb3NpdGlvbn1cclxuICAgIGBcclxuICAgIGNvbnN0IGNvbG9yID0gJ3JlZCdcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyVGV4dChwbGF5ZXJOdW0sIHRleHQpXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclN0ZXBJbmZvKFxyXG4gICAgICBwbGF5ZXJOdW0sXHJcbiAgICAgIHN0ZXAsXHJcbiAgICAgIGRlbGV0ZUNoYXJzU3RlcE1lc3NhZ2UsXHJcbiAgICAgIGNvbG9yXHJcbiAgICApXHJcbiAgICB0aGlzLnJlbmRlcmVyLmhpZ2hsaWdodFBsYXllclRleHQocGxheWVyTnVtKVxyXG4gICAgdGhpcy5yZW5kZXJlci5oaWdobGlnaHRQbGF5ZXJMZXR0ZXJzKHBsYXllck51bSwgY29sb3IsIHBvc2l0aW9uLCBjb3VudClcclxuICB9XHJcblxyXG4gIGZpbmRTdHJTdGVwKHBsYXllck51bSwgc3RlcCkge1xyXG4gICAgY29uc3Qgc3RlcERhdGEgPSB0aGlzLmdldFN0ZXBEYXRhKHBsYXllck51bSwgc3RlcClcclxuICAgIGlmICghc3RlcERhdGEpIHJldHVyblxyXG4gICAgY29uc3QgdGV4dCA9IHN0ZXBEYXRhLnRleHRcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gc3RlcERhdGEucG9zaXRpb25cclxuICAgIGNvbnN0IGZpbmRTdHJTdGVwTWVzc2FnZSA9IGBcclxuICAgICAg0L7QsdC90LDRgNGD0LbQuNC7INC40YHQutC+0LzRg9GOINGB0YLRgNC+0LrRgyDQvdCwINC/0L7Qt9C40YbQuNC4ICR7cG9zaXRpb259XHJcbiAgICBgXHJcbiAgICBjb25zdCBjb2xvciA9ICdibHVlJ1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJUZXh0KHBsYXllck51bSwgdGV4dClcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyU3RlcEluZm8ocGxheWVyTnVtLCBzdGVwLCBmaW5kU3RyU3RlcE1lc3NhZ2UsIGNvbG9yKVxyXG4gICAgdGhpcy5yZW5kZXJlci5oaWdobGlnaHRQbGF5ZXJUZXh0KHBsYXllck51bSlcclxuICAgIHRoaXMucmVuZGVyZXIuaGlnaGxpZ2h0UGxheWVyTGV0dGVycyhwbGF5ZXJOdW0sIGNvbG9yLCBwb3NpdGlvbilcclxuICB9XHJcblxyXG4gIGluc0NoYXJTdGVwKHBsYXllck51bSwgc3RlcCkge1xyXG4gICAgY29uc3Qgc3RlcERhdGEgPSB0aGlzLmdldFN0ZXBEYXRhKHBsYXllck51bSwgc3RlcClcclxuICAgIGlmICghc3RlcERhdGEpIHJldHVyblxyXG4gICAgY29uc3QgdGV4dCA9IHN0ZXBEYXRhLnRleHRcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gc3RlcERhdGEucG9zaXRpb25cclxuICAgIGNvbnN0IGluc0NoYXJTdGVwTWVzc2FnZSA9IGBcclxuICAgICAg0LLRgdGC0LDQstC40Lsg0YHQuNC80LLQvtC7ICcke3RleHRbcG9zaXRpb25dfScg0L3QsCDQv9C+0LfQuNGG0LjRjiAke3Bvc2l0aW9ufVxyXG4gICAgYFxyXG4gICAgY29uc3QgY29sb3IgPSAnZ3JlZW4nXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclRleHQocGxheWVyTnVtLCB0ZXh0KVxyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQbGF5ZXJTdGVwSW5mbyhwbGF5ZXJOdW0sIHN0ZXAsIGluc0NoYXJTdGVwTWVzc2FnZSwgY29sb3IpXHJcbiAgICB0aGlzLnJlbmRlcmVyLmhpZ2hsaWdodFBsYXllclRleHQocGxheWVyTnVtKVxyXG4gICAgdGhpcy5yZW5kZXJlci5oaWdobGlnaHRQbGF5ZXJMZXR0ZXJzKHBsYXllck51bSwgY29sb3IsIHBvc2l0aW9uKVxyXG4gIH1cclxuXHJcbiAgb3V0T2ZCb3VuZHNTdGVwKHBsYXllck51bSwgc3RlcCkge1xyXG4gICAgY29uc3Qgc3RlcERhdGEgPSB0aGlzLmdldFN0ZXBEYXRhKHBsYXllck51bSwgc3RlcClcclxuICAgIGlmICghc3RlcERhdGEpIHJldHVyblxyXG4gICAgY29uc3QgdGV4dCA9IHN0ZXBEYXRhLnRleHRcclxuICAgIGNvbnN0IG91dE9mQm91bmRzU3RlcE1lc3NhZ2UgPSBgXHJcbiAgICAgINCy0YvRiNC10Lsg0LfQsCDQv9GA0LXQtNC10LvRiyDRgdGC0YDQvtC60LhcclxuICAgIGBcclxuICAgIGNvbnN0IGNvbG9yID0gJ3JlZCdcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyVGV4dChwbGF5ZXJOdW0sIHRleHQpXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclN0ZXBJbmZvKFxyXG4gICAgICBwbGF5ZXJOdW0sXHJcbiAgICAgIHN0ZXAsXHJcbiAgICAgIG91dE9mQm91bmRzU3RlcE1lc3NhZ2UsXHJcbiAgICAgIGNvbG9yXHJcbiAgICApXHJcbiAgICB0aGlzLnJlbmRlcmVyLmhpZ2hsaWdodFBsYXllclRleHQocGxheWVyTnVtLCBjb2xvcilcclxuICB9XHJcblxyXG4gIG5vdEZvdW5kU3RlcChwbGF5ZXJOdW0sIHN0ZXApIHtcclxuICAgIGNvbnN0IHN0ZXBEYXRhID0gdGhpcy5nZXRTdGVwRGF0YShwbGF5ZXJOdW0sIHN0ZXApXHJcbiAgICBpZiAoIXN0ZXBEYXRhKSByZXR1cm5cclxuICAgIGNvbnN0IHRleHQgPSBzdGVwRGF0YS50ZXh0XHJcbiAgICBjb25zdCBub3RGb3VuZFN0ZXBNZXNzYWdlID0gYFxyXG4gICAgICDQvdC1INC90LDRiNC10Lsg0LjRgdC60L7QvNGL0Lkg0Y3Qu9C10LzQtdC90YJcclxuICAgIGBcclxuICAgIGNvbnN0IGNvbG9yID0gJ3JlZCdcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGxheWVyVGV4dChwbGF5ZXJOdW0sIHRleHQpXHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFBsYXllclN0ZXBJbmZvKHBsYXllck51bSwgc3RlcCwgbm90Rm91bmRTdGVwTWVzc2FnZSwgY29sb3IpXHJcbiAgICB0aGlzLnJlbmRlcmVyLmhpZ2hsaWdodFBsYXllclRleHQocGxheWVyTnVtLCBjb2xvcilcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL3dpbm5lci1tb2RhbC5zY3NzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFdpbm5lck1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcih3aW5uZXJzKSB7XHJcbiAgICB0aGlzLndpbm5lcnMgPSB3aW5uZXJzID8gd2lubmVycyA6IHdpbmRvdy5nYW1lQ29uZmlnLndpbm5lcnNcclxuICAgIHRoaXMuY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoKVxyXG4gIH1cclxuXHJcbiAgZ2V0V2lubmVySFRNTCgpIHtcclxuICAgIGNvbnN0IHBsYXllcklkID0gd2luZG93LmdhbWVDb25maWcucGxheWVySWRcclxuICAgIGNvbnN0IG9wcG9uZW50SWQgPSB3aW5kb3cuZ2FtZUNvbmZpZy5vcHBvbmVudElkXHJcbiAgICBjb25zdCBwbGF5ZXJOYW1lID0gd2luZG93LmdhbWVDb25maWcucGxheWVyTmFtZVxyXG4gICAgY29uc3Qgb3Bwb25lbnROYW1lID0gd2luZG93LmdhbWVDb25maWcub3Bwb25lbnROYW1lXHJcbiAgICBsZXQgd2lubmVyTmFtZSA9ICcnLFxyXG4gICAgICBsb3Nlck5hbWUgPSAnJ1xyXG4gICAgaWYgKHRoaXMud2lubmVyc1swXSA9PT0gcGxheWVySWQpIHtcclxuICAgICAgd2lubmVyTmFtZSA9IHBsYXllck5hbWVcclxuICAgICAgbG9zZXJOYW1lID0gb3Bwb25lbnROYW1lXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMud2lubmVyc1swXSA9PT0gb3Bwb25lbnRJZCkge1xyXG4gICAgICB3aW5uZXJOYW1lID0gb3Bwb25lbnROYW1lXHJcbiAgICAgIGxvc2VyTmFtZSA9IHBsYXllck5hbWVcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB3aW5IVE1MID0gYFxyXG4gICAgICA8cD48c3BhbiBjbGFzcz1cIndpbm5lclwiPtCf0L7QsdC10LTQuNGC0LXQu9GMOiA8L3NwYW4+PGI+JHt3aW5uZXJOYW1lfTwvYj48L3A+XHJcbiAgICAgIDxwPjxzcGFuIGNsYXNzPVwibG9zZXJcIj7Qn9GA0L7QuNCz0YDQsNCy0YjQuNC5OiA8L3NwYW4+PGI+JHtsb3Nlck5hbWV9PC9iPjwvcD5cclxuICAgIGBcclxuICAgIGNvbnN0IGRyYXdIVE1MID0gYFxyXG4gICAgICA8cCBjbGFzcz1cIndpbm5lclwiPlxyXG4gICAgICAgINCY0LPRgNC+0LrQuCA8Yj4ke3BsYXllck5hbWV9PC9iPiDQuCA8Yj4ke29wcG9uZW50TmFtZX08L2I+INGB0YvQs9GA0LDQu9C4INCy0L3QuNGH0YzRjlxyXG4gICAgICA8L3A+XHJcbiAgICBgXHJcbiAgICBjb25zdCBsb3NlSFRNTCA9IGBcclxuICAgICAgPHAgY2xhc3M9XCJsb3NlclwiPlxyXG4gICAgICAgINCY0LPRgNC+0LrQuCA8Yj4ke3BsYXllck5hbWV9PC9iPiDQuCA8Yj4ke29wcG9uZW50TmFtZX08L2I+INC/0L7RgtC10YDQv9C10LvQuCDQv9C+0YDQsNC20LXQvdC40LVcclxuICAgICAgPC9wPlxyXG4gICAgYFxyXG4gICAgc3dpdGNoICh0aGlzLndpbm5lcnNbMl0pIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIHJldHVybiB3aW5IVE1MXHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICByZXR1cm4gZHJhd0hUTUxcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIHJldHVybiBsb3NlSFRNTFxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGNvbnN0IHdpbm5lck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dpbm5lck1vZGFsJylcclxuICAgIGlmICh3aW5uZXJNb2RhbCkgd2lubmVyTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dpbm5lck1vZGFsQ2xvc2VCdG4nKVxyXG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKClcclxuICAgIGlmIChjbG9zZUJ0bikgY2xvc2VCdG4ub25jbGljayA9IGhhbmRsZUNsaWNrXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGNvbnN0IHdpbm5lck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dpbm5lck1vZGFsJylcclxuICAgIGlmICh3aW5uZXJNb2RhbCkgd2lubmVyTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSByZXR1cm4gdGhpcy5jb21wb25lbnRcclxuICAgIGNvbnN0IHdpbm5lck1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHdpbm5lck1vZGFsLmlkID0gJ3dpbm5lck1vZGFsJ1xyXG4gICAgd2lubmVyTW9kYWwuY2xhc3NOYW1lID0gJ3dpbm5lci1tb2RhbCdcclxuICAgIHdpbm5lck1vZGFsLmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBpZD1cIndpbm5lck1vZGFsQ29udGVudFwiIGNsYXNzPVwid2lubmVyLW1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgICA8c3BhbiBpZD1cIndpbm5lck1vZGFsQ2xvc2VCdG5cIiBjbGFzcz1cImNsb3NlLWJ0blwiPng8L3NwYW4+XHJcbiAgICAgICAgPGRpdiBpZD1cIndpbm5lck1vZGFsSGVhZGluZ1wiPlxyXG4gICAgICAgICAgPGgzIGNsYXNzPVwid2lubmVyLWhlYWRpbmdcIj7QoNC10LfRg9C70YzRgtCw0YIg0LjQs9GA0Ys8L2gzPlxyXG4gICAgICAgICAgJHt0aGlzLmdldFdpbm5lckhUTUwoKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbiAgICByZXR1cm4gd2lubmVyTW9kYWxcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEJ1dHRvblZpc3VhbGl6ZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5yZXdpbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmV3aW5kJylcclxuICAgIHRoaXMucHJldkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmV2JylcclxuICAgIHRoaXMucGxheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5JylcclxuICAgIHRoaXMubmV4dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXh0JylcclxuICAgIHRoaXMuZm9yd2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3J3YXJkJylcclxuICAgIHRoaXMudG9vbHRpcFBsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9vbHRpcFRleHRQbGF5JylcclxuICAgIHRoaXMudG9vbHRpcFBhdXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rvb2x0aXBUZXh0UGF1c2UnKVxyXG4gICAgdGhpcy50b29sdGlwUmVzdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b29sdGlwVGV4dFJlc3RhcnQnKVxyXG4gICAgdGhpcy5pY29uUGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpY29uUGxheScpXHJcbiAgICB0aGlzLmljb25QYXVzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpY29uUGF1c2UnKVxyXG4gICAgdGhpcy5pY29uUmVzdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpY29uUmVzdGFydCcpXHJcbiAgfVxyXG5cclxuICBzZXRCdXR0b25zRGlzYWJpbGl0eShzaWRlID0gJ2FsbCcsIHN0YXRlID0gdHJ1ZSkge1xyXG4gICAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHRoaXMucmV3aW5kQnV0dG9uLmRpc2FibGVkID0gc3RhdGVcclxuICAgICAgICB0aGlzLnByZXZCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICB0aGlzLm5leHRCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZVxyXG4gICAgICAgIHRoaXMuZm9yd2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHN0YXRlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnYWxsJzpcclxuICAgICAgICB0aGlzLnJld2luZEJ1dHRvbi5kaXNhYmxlZCA9IHN0YXRlXHJcbiAgICAgICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gc3RhdGVcclxuICAgICAgICB0aGlzLm5leHRCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZVxyXG4gICAgICAgIHRoaXMuZm9yd2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHN0YXRlXHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFBsYXlCdXR0b25JY29uKGljb25UeXBlID0gJ3BsYXknKSB7XHJcbiAgICBsZXQgcGxheVN0YXRlID0gJ25vbmUnLFxyXG4gICAgICBwYXVzZVN0YXRlID0gJ25vbmUnLFxyXG4gICAgICByZXN0YXJ0U3RhdGUgPSAnbm9uZSdcclxuICAgIGNvbnN0IG5vbmUgPSAnbm9uZSdcclxuICAgIGNvbnN0IGlubGluZUJsb2NrID0gJ2lubGluZS1ibG9jaydcclxuICAgIHN3aXRjaCAoaWNvblR5cGUpIHtcclxuICAgICAgY2FzZSAncGxheSc6XHJcbiAgICAgICAgcGxheVN0YXRlID0gaW5saW5lQmxvY2tcclxuICAgICAgICBwYXVzZVN0YXRlID0gbm9uZVxyXG4gICAgICAgIHJlc3RhcnRTdGF0ZSA9IG5vbmVcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdwYXVzZSc6XHJcbiAgICAgICAgcGxheVN0YXRlID0gbm9uZVxyXG4gICAgICAgIHBhdXNlU3RhdGUgPSBpbmxpbmVCbG9ja1xyXG4gICAgICAgIHJlc3RhcnRTdGF0ZSA9IG5vbmVcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdyZXN0YXJ0JzpcclxuICAgICAgICBwbGF5U3RhdGUgPSBub25lXHJcbiAgICAgICAgcGF1c2VTdGF0ZSA9IG5vbmVcclxuICAgICAgICByZXN0YXJ0U3RhdGUgPSBpbmxpbmVCbG9ja1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICB0aGlzLnRvb2x0aXBQbGF5LnN0eWxlLmRpc3BsYXkgPSBwbGF5U3RhdGVcclxuICAgIHRoaXMudG9vbHRpcFBhdXNlLnN0eWxlLmRpc3BsYXkgPSBwYXVzZVN0YXRlXHJcbiAgICB0aGlzLnRvb2x0aXBSZXN0YXJ0LnN0eWxlLmRpc3BsYXkgPSByZXN0YXJ0U3RhdGVcclxuICAgIHRoaXMuaWNvblBsYXkuc3R5bGUuZGlzcGxheSA9IHBsYXlTdGF0ZVxyXG4gICAgdGhpcy5pY29uUGF1c2Uuc3R5bGUuZGlzcGxheSA9IHBhdXNlU3RhdGVcclxuICAgIHRoaXMuaWNvblJlc3RhcnQuc3R5bGUuZGlzcGxheSA9IHJlc3RhcnRTdGF0ZVxyXG5cclxuICAgIHRoaXMucGxheUJ1dHRvbi5kYXRhc2V0LnN0YXR1cyA9IGljb25UeXBlXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFN0ZXBDb250cm9sbGVyIH0gZnJvbSAnLi4vc3RlcCdcclxuaW1wb3J0IHsgV2lubmVyTW9kYWwgfSBmcm9tICcuLi93aW5uZXItbW9kYWwvV2lubmVyTW9kYWwuanMnXHJcbmltcG9ydCB7IEJ1dHRvblZpc3VhbGl6ZXIgfSBmcm9tICcuL0J1dHRvblZpc3VhbGl6ZXIuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dG9uSGFuZGxlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnBsYXllciA9IDFcclxuICAgIHRoaXMub3Bwb25lbnQgPSAyXHJcbiAgICB0aGlzLnBsYXllclN0ZXAgPSAtMVxyXG4gICAgdGhpcy5vcHBvbmVudFN0ZXAgPSAtMVxyXG4gICAgdGhpcy50aW1lckRlbGF5ID0gMTAwMFxyXG4gICAgdGhpcy50aW1lcklEID0gMFxyXG4gICAgdGhpcy5zdGVwc0NvdW50ID0gd2luZG93LmdhbWVDb25maWcuc3RlcHNDb3VudFxyXG4gICAgdGhpcy5sYXN0UGxheWVyU3RlcCA9IHdpbmRvdy5nYW1lQ29uZmlnLnBsYXllclN0ZXBzLmxlbmd0aCAtIDFcclxuICAgIHRoaXMubGFzdE9wcG9uZW50U3RlcCA9IHdpbmRvdy5nYW1lQ29uZmlnLm9wcG9uZW50U3RlcHMubGVuZ3RoIC0gMVxyXG4gICAgdGhpcy5tYXhOdW1iZXJPZlN0ZXBzID0gd2luZG93LmdhbWVDb25maWcubWF4U3RlcHNcclxuICAgIGlmICh0aGlzLmxhc3RQbGF5ZXJTdGVwID49IHRoaXMubGFzdE9wcG9uZW50U3RlcCkge1xyXG4gICAgICB0aGlzLm1heFN0ZXBzID0gdGhpcy5sYXN0UGxheWVyU3RlcFxyXG4gICAgfSBlbHNlIHRoaXMubWF4U3RlcHMgPSB0aGlzLmxhc3RPcHBvbmVudFN0ZXBcclxuXHJcbiAgICB0aGlzLnN0ZXBDb250cm9sbGVyID0gbmV3IFN0ZXBDb250cm9sbGVyKClcclxuICAgIHRoaXMud2lubmVyTW9kYWwgPSBuZXcgV2lubmVyTW9kYWwoKVxyXG4gICAgdGhpcy52aXN1YWxpemVyID0gbmV3IEJ1dHRvblZpc3VhbGl6ZXIoKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50eXBlID09PSAnY2xpY2snKSB7XHJcbiAgICAgIGNvbnN0IHJld2luZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcjcmV3aW5kJylcclxuICAgICAgY29uc3QgcHJldiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcjcHJldicpXHJcbiAgICAgIGNvbnN0IHBsYXkgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnI3BsYXknKVxyXG4gICAgICBjb25zdCBuZXh0ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJyNuZXh0JylcclxuICAgICAgY29uc3QgZm9yd2FyZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcjZm9yd2FyZCcpXHJcblxyXG4gICAgICBpZiAocmV3aW5kICYmICFyZXdpbmQuZGlzYWJsZWQpIHRoaXMucmV3aW5kKClcclxuICAgICAgZWxzZSBpZiAocHJldiAmJiAhcHJldi5kaXNhYmxlZCkgdGhpcy5wcmV2KClcclxuICAgICAgZWxzZSBpZiAocGxheSkge1xyXG4gICAgICAgIHN3aXRjaCAocGxheS5kYXRhc2V0LnN0YXR1cykge1xyXG4gICAgICAgICAgY2FzZSAncGxheSc6XHJcbiAgICAgICAgICAgIHRoaXMucGxheSh0aGlzLnBsYXllclN0ZXAsIHRoaXMub3Bwb25lbnRTdGVwKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAncGF1c2UnOlxyXG4gICAgICAgICAgICB0aGlzLnBhdXNlKClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3Jlc3RhcnQnOlxyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnQoKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChuZXh0ICYmICFuZXh0LmRpc2FibGVkKSB0aGlzLm5leHQoKVxyXG4gICAgICBlbHNlIGlmIChmb3J3YXJkICYmICFmb3J3YXJkLmRpc2FibGVkKSB0aGlzLmZvcndhcmQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0QnV0dG9uc1N0YXRlKCkge1xyXG4gICAgY29uc3QgaXNGaXJzdFN0ZXAgPSB0aGlzLnBsYXllclN0ZXAgPT09IDAgJiYgdGhpcy5vcHBvbmVudFN0ZXAgPT09IDBcclxuICAgIGlmIChpc0ZpcnN0U3RlcCkgdGhpcy52aXN1YWxpemVyLnNldEJ1dHRvbnNEaXNhYmlsaXR5KCdsZWZ0JywgdHJ1ZSlcclxuICAgIGVsc2UgdGhpcy52aXN1YWxpemVyLnNldEJ1dHRvbnNEaXNhYmlsaXR5KCdsZWZ0JywgZmFsc2UpXHJcbiAgICBjb25zdCBpc0xhc3RTdGVwID1cclxuICAgICAgdGhpcy5wbGF5ZXJTdGVwID09PSB0aGlzLmxhc3RQbGF5ZXJTdGVwICYmXHJcbiAgICAgIHRoaXMub3Bwb25lbnRTdGVwID09PSB0aGlzLmxhc3RPcHBvbmVudFN0ZXBcclxuICAgIGlmIChpc0xhc3RTdGVwKSB0aGlzLnZpc3VhbGl6ZXIuc2V0QnV0dG9uc0Rpc2FiaWxpdHkoJ3JpZ2h0JywgdHJ1ZSlcclxuICAgIGVsc2UgdGhpcy52aXN1YWxpemVyLnNldEJ1dHRvbnNEaXNhYmlsaXR5KCdyaWdodCcsIGZhbHNlKVxyXG4gIH1cclxuXHJcbiAgc2V0R2FtZVN0ZXAoKSB7XHJcbiAgICB0aGlzLnN0ZXBDb250cm9sbGVyLnNldFN0ZXAodGhpcy5wbGF5ZXIsIHRoaXMucGxheWVyU3RlcClcclxuICAgIHRoaXMuc3RlcENvbnRyb2xsZXIuc2V0U3RlcCh0aGlzLm9wcG9uZW50LCB0aGlzLm9wcG9uZW50U3RlcClcclxuICAgIHRoaXMuc2V0R2FtZUZpbmlzaFZpc2liaWxpdHkoKVxyXG4gIH1cclxuXHJcbiAgc2V0R2FtZUZpbmlzaFZpc2liaWxpdHkoKSB7XHJcbiAgICBjb25zdCBtYXhOdW1iZXJPZlN0ZXBzRXhjZWVkTWVzc2FnZSA9XHJcbiAgICAgICfQn9GA0LXQstGL0YjQtdC90L4g0LzQsNC60YHQuNC80LDQu9GM0L3QvtC1INC60L7Qu9C40YfQtdGB0YLQstC+INGF0L7QtNC+0LInXHJcbiAgICBjb25zdCB0YXNrRW5kTWVzc2FnZSA9ICfQl9Cw0LTQsNGH0LAg0LfQsNCy0LXRgNGI0LXQvdCwJ1xyXG4gICAgY29uc3QgcGxheWVyRmluaXNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllckZpbmlzaCcpXHJcbiAgICBpZiAocGxheWVyRmluaXNoICYmIHRoaXMucGxheWVyU3RlcCA9PT0gdGhpcy5sYXN0UGxheWVyU3RlcCkge1xyXG4gICAgICBwbGF5ZXJGaW5pc2guc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xyXG4gICAgICBpZiAodGhpcy5sYXN0UGxheWVyU3RlcCA+IHRoaXMubWF4TnVtYmVyT2ZTdGVwcykge1xyXG4gICAgICAgIHBsYXllckZpbmlzaC50ZXh0Q29udGVudCA9IG1heE51bWJlck9mU3RlcHNFeGNlZWRNZXNzYWdlXHJcbiAgICAgIH0gZWxzZSBwbGF5ZXJGaW5pc2gudGV4dENvbnRlbnQgPSB0YXNrRW5kTWVzc2FnZVxyXG4gICAgfSBlbHNlIHBsYXllckZpbmlzaC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbidcclxuXHJcbiAgICBjb25zdCBvcHBvbmVudEZpbmlzaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHBvbmVudEZpbmlzaCcpXHJcbiAgICBpZiAob3Bwb25lbnRGaW5pc2ggJiYgdGhpcy5vcHBvbmVudFN0ZXAgPT09IHRoaXMubGFzdE9wcG9uZW50U3RlcCkge1xyXG4gICAgICBvcHBvbmVudEZpbmlzaC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXHJcbiAgICAgIGlmICh0aGlzLmxhc3RPcHBvbmVudFN0ZXAgPiB0aGlzLm1heE51bWJlck9mU3RlcHMpIHtcclxuICAgICAgICBvcHBvbmVudEZpbmlzaC50ZXh0Q29udGVudCA9IG1heE51bWJlck9mU3RlcHNFeGNlZWRNZXNzYWdlXHJcbiAgICAgIH0gZWxzZSBvcHBvbmVudEZpbmlzaC50ZXh0Q29udGVudCA9IHRhc2tFbmRNZXNzYWdlXHJcbiAgICB9IGVsc2Ugb3Bwb25lbnRGaW5pc2guc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXHJcbiAgfVxyXG5cclxuICBpc0ZpbmlzaGVkKCkge1xyXG4gICAgY29uc3QgY3VycmVudFN0ZXBzQ291bnQgPSB0aGlzLnBsYXllclN0ZXAgKyB0aGlzLm9wcG9uZW50U3RlcFxyXG4gICAgaWYgKGN1cnJlbnRTdGVwc0NvdW50ID49IHRoaXMuc3RlcHNDb3VudCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSBlbHNlIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgcGxheShwbGF5ZXJDdXJyZW50U3RlcCA9IDAsIG9wcG9uZW50Q3VycmVudFN0ZXAgPSAwKSB7XHJcbiAgICB0aGlzLnZpc3VhbGl6ZXIuc2V0QnV0dG9uc0Rpc2FiaWxpdHkoJ2FsbCcsIHRydWUpXHJcbiAgICB0aGlzLnZpc3VhbGl6ZXIuc2V0UGxheUJ1dHRvbkljb24oJ3BhdXNlJylcclxuICAgIHRoaXMucGxheWVyU3RlcCA9IHBsYXllckN1cnJlbnRTdGVwID4gMCA/IHBsYXllckN1cnJlbnRTdGVwIDogMFxyXG4gICAgdGhpcy5vcHBvbmVudFN0ZXAgPSBvcHBvbmVudEN1cnJlbnRTdGVwID4gMCA/IG9wcG9uZW50Q3VycmVudFN0ZXAgOiAwXHJcbiAgICB0aGlzLnNldEdhbWVTdGVwKClcclxuICAgIHRoaXMuaW50ZXJ2YWxJRCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaXNGaW5pc2hlZCgpKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSUQpXHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbElEID0gMFxyXG4gICAgICAgIHRoaXMudmlzdWFsaXplci5zZXRQbGF5QnV0dG9uSWNvbigncmVzdGFydCcpXHJcbiAgICAgICAgdGhpcy5zZXRCdXR0b25zU3RhdGUoKVxyXG4gICAgICAgIHRoaXMud2lubmVyTW9kYWwub3BlbigpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMucGxheWVyU3RlcCA8IHRoaXMubGFzdFBsYXllclN0ZXApIHtcclxuICAgICAgICB0aGlzLnBsYXllclN0ZXArK1xyXG4gICAgICAgIHRoaXMuc3RlcENvbnRyb2xsZXIuc2V0U3RlcCh0aGlzLnBsYXllciwgdGhpcy5wbGF5ZXJTdGVwKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm9wcG9uZW50U3RlcCA8IHRoaXMubGFzdE9wcG9uZW50U3RlcCkge1xyXG4gICAgICAgIHRoaXMub3Bwb25lbnRTdGVwKytcclxuICAgICAgICB0aGlzLnN0ZXBDb250cm9sbGVyLnNldFN0ZXAodGhpcy5vcHBvbmVudCwgdGhpcy5vcHBvbmVudFN0ZXApXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRHYW1lRmluaXNoVmlzaWJpbGl0eSgpXHJcbiAgICB9LCB0aGlzLnRpbWVyRGVsYXkpXHJcbiAgfVxyXG5cclxuICBwYXVzZSgpIHtcclxuICAgIGlmICh0aGlzLmludGVydmFsSUQpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSUQpXHJcbiAgICAgIHRoaXMuaW50ZXJ2YWxJRCA9IDBcclxuICAgIH1cclxuICAgIHRoaXMudmlzdWFsaXplci5zZXRQbGF5QnV0dG9uSWNvbigncGxheScpXHJcbiAgICB0aGlzLnNldEJ1dHRvbnNTdGF0ZSgpXHJcbiAgfVxyXG5cclxuICByZXN0YXJ0KCkge1xyXG4gICAgdGhpcy5wbGF5ZXJTdGVwID0gMFxyXG4gICAgdGhpcy5vcHBvbmVudFN0ZXAgPSAwXHJcbiAgICB0aGlzLnBsYXkoKVxyXG4gIH1cclxuXHJcbiAgcmV3aW5kKCkge1xyXG4gICAgdGhpcy5wbGF5ZXJTdGVwID0gMFxyXG4gICAgdGhpcy5vcHBvbmVudFN0ZXAgPSAwXHJcbiAgICB0aGlzLnNldEJ1dHRvbnNTdGF0ZSgpXHJcbiAgICB0aGlzLnNldEdhbWVTdGVwKClcclxuICB9XHJcblxyXG4gIHByZXYoKSB7XHJcbiAgICBsZXQgZGVjcmVhc2VQbGF5ZXJTdGVwID0gZmFsc2UsXHJcbiAgICAgIGRlY3JlYXNlT3Bwb25lbnRTdGVwID0gZmFsc2VcclxuICAgIGlmICh0aGlzLnBsYXllclN0ZXAgPiAwICYmIHRoaXMucGxheWVyU3RlcCA+PSB0aGlzLm9wcG9uZW50U3RlcCkge1xyXG4gICAgICBkZWNyZWFzZVBsYXllclN0ZXAgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5vcHBvbmVudFN0ZXAgPiAwICYmIHRoaXMub3Bwb25lbnRTdGVwID49IHRoaXMucGxheWVyU3RlcCkge1xyXG4gICAgICBkZWNyZWFzZU9wcG9uZW50U3RlcCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmIChkZWNyZWFzZVBsYXllclN0ZXApIHRoaXMucGxheWVyU3RlcC0tXHJcbiAgICBpZiAoZGVjcmVhc2VPcHBvbmVudFN0ZXApIHRoaXMub3Bwb25lbnRTdGVwLS1cclxuXHJcbiAgICB0aGlzLnNldEJ1dHRvbnNTdGF0ZSgpXHJcbiAgICB0aGlzLnNldEdhbWVTdGVwKClcclxuICB9XHJcblxyXG4gIG5leHQoKSB7XHJcbiAgICBpZiAodGhpcy5wbGF5ZXJTdGVwIDwgdGhpcy5sYXN0UGxheWVyU3RlcCkgdGhpcy5wbGF5ZXJTdGVwKytcclxuICAgIGlmICh0aGlzLm9wcG9uZW50U3RlcCA8IHRoaXMubGFzdE9wcG9uZW50U3RlcCkgdGhpcy5vcHBvbmVudFN0ZXArK1xyXG4gICAgdGhpcy5zZXRCdXR0b25zU3RhdGUoKVxyXG4gICAgdGhpcy5zZXRHYW1lU3RlcCgpXHJcbiAgICBpZiAodGhpcy5pc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgdGhpcy52aXN1YWxpemVyLnNldFBsYXlCdXR0b25JY29uKCdyZXN0YXJ0JylcclxuICAgICAgdGhpcy53aW5uZXJNb2RhbC5vcGVuKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvcndhcmQoKSB7XHJcbiAgICB0aGlzLnBsYXllclN0ZXAgPSB0aGlzLmxhc3RQbGF5ZXJTdGVwXHJcbiAgICB0aGlzLm9wcG9uZW50U3RlcCA9IHRoaXMubGFzdE9wcG9uZW50U3RlcFxyXG4gICAgdGhpcy52aXN1YWxpemVyLnNldFBsYXlCdXR0b25JY29uKCdyZXN0YXJ0JylcclxuICAgIHRoaXMuc2V0QnV0dG9uc1N0YXRlKClcclxuICAgIHRoaXMuc2V0R2FtZVN0ZXAoKVxyXG4gICAgdGhpcy53aW5uZXJNb2RhbC5vcGVuKClcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEJ1dHRvbkljb24ge1xyXG4gIGNvbnN0cnVjdG9yKGljb25UeXBlKSB7XHJcbiAgICB0aGlzLmljb25UeXBlID0gaWNvblR5cGVcclxuICB9XHJcblxyXG4gIGdldEljb25IVE1MKCkge1xyXG4gICAgY29uc3QgcmV3aW5kSWNvbiA9IGBcclxuICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTE3LDVIMTRWMTlIMTdWNU0xMiw1TDEsMTJMMTIsMTlWNU0yMiw1SDE5VjE5SDIyVjVaXCI+PC9wYXRoPlxyXG4gICAgICA8L3N2Zz5cclxuICAgIGBcclxuICAgIGNvbnN0IHByZXZJY29uID0gYFxyXG4gICAgICA8c3ZnIHN0eWxlPVwid2lkdGg6MjRweDtoZWlnaHQ6MjRweDtcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTksNVYxOUgxNlY1TTE0LDVWMTlMMywxMlwiPjwvcGF0aD5cclxuICAgICAgPC9zdmc+XHJcbiAgICBgXHJcbiAgICBjb25zdCBuZXh0SWNvbiA9IGBcclxuICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTUsNVYxOUg4VjVNMTAsNVYxOUwyMSwxMlwiPjwvcGF0aD5cclxuICAgICAgPC9zdmc+XHJcbiAgICBgXHJcbiAgICBjb25zdCBmb3J3YXJkSWNvbiA9IGBcclxuICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTcsNUgxMFYxOUg3VjVNMTIsNUwyMywxMkwxMiwxOVY1TTIsNUg1VjE5SDJWNVpcIj48L3BhdGg+XHJcbiAgICAgIDwvc3ZnPlxyXG4gICAgYFxyXG4gICAgY29uc3QgcmVzdGFydEljb24gPSBgXHJcbiAgICAgIDxzdmcgc3R5bGU9XCJ3aWR0aDoyNHB4O2hlaWdodDoyNHB4O1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xNy42NSw2LjM1QzE2LjIsNC45IDE0LjIxLDQgMTIsNEE4LDggMCAwLDAgNCwxMkE4LDggMCAwLDAgMTIsMjBDMTUuNzMsMjAgMTguODQsMTcuNDUgMTkuNzMsMTRIMTcuNjVDMTYuODMsMTYuMzMgMTQuNjEsMTggMTIsMThBNiw2IDAgMCwxIDYsMTJBNiw2IDAgMCwxIDEyLDZDMTMuNjYsNiAxNS4xNCw2LjY5IDE2LjIyLDcuNzhMMTMsMTFIMjBWNEwxNy42NSw2LjM1WlwiPjwvcGF0aD5cclxuICAgICAgPC9zdmc+XHJcbiAgICBgXHJcbiAgICBjb25zdCBwbGF5SWNvbiA9IGBcclxuICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaXCI+PC9wYXRoPlxyXG4gICAgICA8L3N2Zz5cclxuICAgIGBcclxuICAgIGNvbnN0IHBhdXNlSWNvbiA9IGBcclxuICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTE0LDE5SDE4VjVIMTRNNiwxOUgxMFY1SDZWMTlaXCI+PC9wYXRoPlxyXG4gICAgICA8L3N2Zz5cclxuICAgIGBcclxuICAgIHN3aXRjaCAodGhpcy5pY29uVHlwZSkge1xyXG4gICAgICBjYXNlICdwcmV2JzpcclxuICAgICAgICByZXR1cm4gcHJldkljb25cclxuICAgICAgY2FzZSAnbmV4dCc6XHJcbiAgICAgICAgcmV0dXJuIG5leHRJY29uXHJcbiAgICAgIGNhc2UgJ3Jld2luZCc6XHJcbiAgICAgICAgcmV0dXJuIHJld2luZEljb25cclxuICAgICAgY2FzZSAnZm9yd2FyZCc6XHJcbiAgICAgICAgcmV0dXJuIGZvcndhcmRJY29uXHJcbiAgICAgIGNhc2UgJ3BsYXknOlxyXG4gICAgICAgIHJldHVybiBwbGF5SWNvblxyXG4gICAgICBjYXNlICdyZXN0YXJ0JzpcclxuICAgICAgICByZXR1cm4gcmVzdGFydEljb25cclxuICAgICAgY2FzZSAncGF1c2UnOlxyXG4gICAgICAgIHJldHVybiBwYXVzZUljb25cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQnV0dG9uSWNvbiB9IGZyb20gJy4vQnV0dG9uSWNvbi5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25zQ29udGFpbmVyIHtcclxuICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGJ1dHRvbnNDb250YWluZXIuY2xhc3NOYW1lID0gJ2NvbnRhaW5lciBidXR0b25zLWNvbnRhaW5lcidcclxuICAgIGJ1dHRvbnNDb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcFwiPlxyXG4gICAgICAgICR7dGhpcy5nZXRSZXdpbmRCdXR0b24odHJ1ZSkub3V0ZXJIVE1MfVxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwidG9vbHRpcC10ZXh0XCI+0J/QtdGA0LXQvNC+0YLQsNGC0Ywg0LIg0L3QsNGH0LDQu9C+PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInRvb2x0aXBcIj5cclxuICAgICAgICAke3RoaXMuZ2V0UHJldkJ1dHRvbih0cnVlKS5vdXRlckhUTUx9XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0b29sdGlwLXRleHRcIj7QqNCw0LMg0L3QsNC30LDQtDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0b29sdGlwXCI+XHJcbiAgICAgICAgJHt0aGlzLmdldFBsYXlCdXR0b24oKS5vdXRlckhUTUx9XHJcbiAgICAgICAgPHNwYW4gXHJcbiAgICAgICAgICBpZD1cInRvb2x0aXBUZXh0UmVzdGFydFwiXHJcbiAgICAgICAgICBjbGFzcz1cInRvb2x0aXAtdGV4dFwiXHJcbiAgICAgICAgICBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj5cclxuICAgICAgICAgINCg0LXRgdGC0LDRgNGCXHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDxzcGFuIFxyXG4gICAgICAgICAgaWQ9XCJ0b29sdGlwVGV4dFBsYXlcIlxyXG4gICAgICAgICAgY2xhc3M9XCJ0b29sdGlwLXRleHRcIlxyXG4gICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBpbmxpbmUtYmxvY2tcIj5cclxuICAgICAgICAgINCX0LDQv9GD0YHRgtC40YLRjFxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBcclxuICAgICAgICAgIGlkPVwidG9vbHRpcFRleHRQYXVzZVwiXHJcbiAgICAgICAgICBjbGFzcz1cInRvb2x0aXAtdGV4dFwiXHJcbiAgICAgICAgICBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj5cclxuICAgICAgICAgINCf0LDRg9C30LBcclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcFwiPlxyXG4gICAgICAgICR7dGhpcy5nZXROZXh0QnV0dG9uKCkub3V0ZXJIVE1MfVxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwidG9vbHRpcC10ZXh0XCI+0KjQsNCzINCy0L/QtdGA0LXQtDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0b29sdGlwXCI+XHJcbiAgICAgICAgJHt0aGlzLmdldEZvcndhcmRCdXR0b24oKS5vdXRlckhUTUx9XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0b29sdGlwLXRleHRcIj7Qn9C10YDQtdC80L7RgtCw0YLRjCDQsiDQutC+0L3QtdGGPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGBcclxuXHJcbiAgICByZXR1cm4gYnV0dG9uc0NvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgZ2V0UHJldkJ1dHRvbihkaXNhYmxlZCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIHByZXZCdG4uaWQgPSAncHJldidcclxuICAgIHByZXZCdG4uY2xhc3NOYW1lID0gJ2J0bidcclxuICAgIGlmIChkaXNhYmxlZCkgcHJldkJ0bi5kaXNhYmxlZCA9IHRydWVcclxuICAgIHByZXZCdG4uaW5uZXJIVE1MID0gbmV3IEJ1dHRvbkljb24oJ3ByZXYnKS5nZXRJY29uSFRNTCgpXHJcblxyXG4gICAgcmV0dXJuIHByZXZCdG5cclxuICB9XHJcblxyXG4gIGdldE5leHRCdXR0b24oZGlzYWJsZWQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcbiAgICBuZXh0QnRuLmlkID0gJ25leHQnXHJcbiAgICBuZXh0QnRuLmNsYXNzTmFtZSA9ICdidG4nXHJcbiAgICBpZiAoZGlzYWJsZWQpIG5leHRCdG4uZGlzYWJsZWQgPSB0cnVlXHJcbiAgICBuZXh0QnRuLmlubmVySFRNTCA9IG5ldyBCdXR0b25JY29uKCduZXh0JykuZ2V0SWNvbkhUTUwoKVxyXG5cclxuICAgIHJldHVybiBuZXh0QnRuXHJcbiAgfVxyXG5cclxuICBnZXRSZXdpbmRCdXR0b24oZGlzYWJsZWQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgcmV3aW5kQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIHJld2luZEJ0bi5pZCA9ICdyZXdpbmQnXHJcbiAgICByZXdpbmRCdG4uY2xhc3NOYW1lID0gJ2J0bidcclxuICAgIGlmIChkaXNhYmxlZCkgcmV3aW5kQnRuLmRpc2FibGVkID0gdHJ1ZVxyXG4gICAgcmV3aW5kQnRuLmlubmVySFRNTCA9IG5ldyBCdXR0b25JY29uKCdyZXdpbmQnKS5nZXRJY29uSFRNTCgpXHJcblxyXG4gICAgcmV0dXJuIHJld2luZEJ0blxyXG4gIH1cclxuXHJcbiAgZ2V0Rm9yd2FyZEJ1dHRvbihkaXNhYmxlZCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBmb3J3YXJkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIGZvcndhcmRCdG4uaWQgPSAnZm9yd2FyZCdcclxuICAgIGZvcndhcmRCdG4uY2xhc3NOYW1lID0gJ2J0bidcclxuICAgIGlmIChkaXNhYmxlZCkgZm9yd2FyZEJ0bi5kaXNhYmxlZCA9IHRydWVcclxuICAgIGZvcndhcmRCdG4uaW5uZXJIVE1MID0gbmV3IEJ1dHRvbkljb24oJ2ZvcndhcmQnKS5nZXRJY29uSFRNTCgpXHJcblxyXG4gICAgcmV0dXJuIGZvcndhcmRCdG5cclxuICB9XHJcblxyXG4gIGdldFBsYXlCdXR0b24oKSB7XHJcbiAgICBjb25zdCBwbGF5QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIHBsYXlCdG4uaWQgPSAncGxheSdcclxuICAgIHBsYXlCdG4uY2xhc3NOYW1lID0gJ2J0bidcclxuICAgIHBsYXlCdG4uZGF0YXNldC5zdGF0dXMgPSAncGxheSdcclxuICAgIHBsYXlCdG4uaW5uZXJIVE1MID0gYFxyXG4gICAgICA8c3BhbiBpZD1cImljb25SZXN0YXJ0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+XHJcbiAgICAgICAgJHtuZXcgQnV0dG9uSWNvbigncmVzdGFydCcpLmdldEljb25IVE1MKCl9XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICAgPHNwYW4gaWQ9XCJpY29uUGxheVwiIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7XCI+XHJcbiAgICAgICAgJHtuZXcgQnV0dG9uSWNvbigncGxheScpLmdldEljb25IVE1MKCl9XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICAgPHNwYW4gaWQ9XCJpY29uUGF1c2VcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj5cclxuICAgICAgICAke25ldyBCdXR0b25JY29uKCdwYXVzZScpLmdldEljb25IVE1MKCl9XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIGBcclxuXHJcbiAgICByZXR1cm4gcGxheUJ0blxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vcGxheWVyLXRleHQuc2NzcydcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXJUZXh0IHtcclxuICBjb25zdHJ1Y3RvcihwbGF5ZXJOdW1iZXIpIHtcclxuICAgIHRoaXMucGxheWVyU3RyID1cclxuICAgICAgcGxheWVyTnVtYmVyID09PSAxID8gJ3BsYXllcicgOiBwbGF5ZXJOdW1iZXIgPT09IDIgPyAnb3Bwb25lbnQnIDogJydcclxuICAgIHRoaXMuY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQocGxheWVyTnVtYmVyKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSByZXR1cm4gdGhpcy5jb21wb25lbnRcclxuXHJcbiAgICBjb25zdCBwbGF5ZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgcGxheWVyQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdwbGF5ZXItY29udGFpbmVyJ1xyXG4gICAgcGxheWVyQ29udGFpbmVyLmlkID0gYCR7dGhpcy5wbGF5ZXJTdHJ9Q29udGFpbmVyYFxyXG4gICAgcGxheWVyQ29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgPGg0IGlkPVwiJHt0aGlzLnBsYXllclN0cn1OYW1lXCIgY2xhc3M9XCJwbGF5ZXItaGVhZGVyXCI+PC9oND5cclxuICAgICAgPGRpdiBpZD1cIiR7dGhpcy5wbGF5ZXJTdHJ9VGV4dFwiIGNsYXNzPVwicGxheWVyLXRleHRcIj48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImdhbWUtaW5mb1wiIGlkPVwiJHt0aGlzLnBsYXllclN0cn1JbmZvXCI+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJnYW1lLWZpbmlzaFwiIGlkPVwiJHt0aGlzLnBsYXllclN0cn1GaW5pc2hcIj48L2Rpdj5cclxuICAgIGBcclxuICAgIHJldHVybiBwbGF5ZXJDb250YWluZXJcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL3Rhc2staW5mby5zY3NzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhc2tJbmZvIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoKVxyXG4gICAgdGhpcy5udW1iZXJPZlRhc2sgPSB3aW5kb3cuZ2FtZUNvbmZpZy5udW1iZXJPZlRhc2tcclxuICB9XHJcblxyXG4gIGdldENvbXBvbmVudCgpIHtcclxuICAgIGNvbnN0IHRhc2tJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHRhc2tJbmZvLmlkID0gJ3Rhc2tJbmZvJ1xyXG4gICAgdGFza0luZm8uY2xhc3NOYW1lID0gJ3Rhc2staW5mbydcclxuXHJcbiAgICBjb25zdCBmaXJzdFRhc2tIVE1MID0gYFxyXG4gICAgICA8Yj7Ql9Cw0LTQsNC90LjQtSAxOiA8L2I+INGD0LTQsNC70LjRgtGMINC70LjRiNC90LjQtSDQuCDQstGB0YLQsNCy0LjRgtGMINC90LXQvtCx0YXQvtC00LjQvNGL0LUg0L/RgNC+0LHQtdC70YtcclxuICAgIGBcclxuICAgIGNvbnN0IHNlY29uZFRhc2tIVE1MID0gYFxyXG4gICAgICA8Yj7Ql9Cw0LTQsNC90LjQtSAyOiA8L2I+INC30LDQvNC10L3QuNGC0Ywg0LLRgdC1INGB0LvQvtCy0LAg4oCcdGhl4oCdINC90LAg0YHQu9C+0LLQviDigJxh4oCdINC4INGB0LvQvtCy0LBcclxuICAgICAg4oCcVGhl4oCdINC90LAg0YHQu9C+0LLQviDigJxB4oCdXHJcbiAgICBgXHJcbiAgICBjb25zdCB0aGlyZFRhc2tIVE1MID0gYFxyXG4gICAgICA8Yj7Ql9Cw0LTQsNC90LjQtSAzOiA8L2I+INGD0LTQsNC70LjRgtGMINC/0L7QstGC0L7RgNC90YvQtSDQstGF0L7QttC00LXQvdC40Y8g0LIg0YLQtdC60YHRgiDQvtC00L3QuNGFIFxyXG4gICAgICDQuCDRgtC10YUg0LbQtSDRgdC70L7QslxyXG4gICAgYFxyXG4gICAgc3dpdGNoICh0aGlzLm51bWJlck9mVGFzaykge1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgdGFza0luZm8uaW5uZXJIVE1MID0gZmlyc3RUYXNrSFRNTFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICB0YXNrSW5mby5pbm5lckhUTUwgPSBzZWNvbmRUYXNrSFRNTFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICB0YXNrSW5mby5pbm5lckhUTUwgPSB0aGlyZFRhc2tIVE1MXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0YXNrSW5mby5pbm5lckhUTUwgPSAnJ1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0YXNrSW5mb1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCdXR0b25zQ29udGFpbmVyLCBCdXR0b25IYW5kbGVyIH0gZnJvbSAnLi4vYnV0dG9ucydcclxuaW1wb3J0IHsgUGxheWVyVGV4dCB9IGZyb20gJy4uL3BsYXllci10ZXh0L1BsYXllclRleHQuanMnXHJcbmltcG9ydCB7IFN0ZXBWaXN1YWxpemVyIH0gZnJvbSAnLi4vc3RlcCdcclxuaW1wb3J0IHsgV2lubmVyTW9kYWwgfSBmcm9tICcuLi93aW5uZXItbW9kYWwvV2lubmVyTW9kYWwuanMnXHJcbmltcG9ydCB7IFRhc2tJbmZvIH0gZnJvbSAnLi4vdGFzay1pbmZvL1Rhc2tJbmZvLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbnNDb250YWluZXIgPSBuZXcgQnV0dG9uc0NvbnRhaW5lcigpXHJcbiAgICB0aGlzLnBsYXllciA9IDFcclxuICAgIHRoaXMub3Bwb25lbnQgPSAyXHJcbiAgICB0aGlzLnBsYXllclRleHRCbG9jayA9IG5ldyBQbGF5ZXJUZXh0KHRoaXMucGxheWVyKVxyXG4gICAgdGhpcy5vcHBvbmVudFRleHRCbG9jayA9IG5ldyBQbGF5ZXJUZXh0KHRoaXMub3Bwb25lbnQpXHJcbiAgICB0aGlzLnRhc2tJbmZvID0gbmV3IFRhc2tJbmZvKClcclxuICAgIHRoaXMud2lubmVyTW9kYWwgPSBuZXcgV2lubmVyTW9kYWwoKVxyXG4gICAgdGhpcy5jb21wb25lbnQgPSB0aGlzLmdldENvbXBvbmVudCgpXHJcbiAgfVxyXG5cclxuICBzdGFydCgpIHtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuY29tcG9uZW50KVxyXG4gICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuY29tcG9uZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zLWNvbnRhaW5lcicpXHJcbiAgICBidXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3IEJ1dHRvbkhhbmRsZXIoKSlcclxuICAgIGNvbnN0IHN0ZXBWaXN1YWxpemVyID0gbmV3IFN0ZXBWaXN1YWxpemVyKClcclxuICAgIHN0ZXBWaXN1YWxpemVyLnNldFBsYXllck5hbWVzKFxyXG4gICAgICB3aW5kb3cuZ2FtZUNvbmZpZy5wbGF5ZXJOYW1lLFxyXG4gICAgICB3aW5kb3cuZ2FtZUNvbmZpZy5vcHBvbmVudE5hbWVcclxuICAgIClcclxuICAgIHN0ZXBWaXN1YWxpemVyLnNldFBsYXllclRleHQodGhpcy5wbGF5ZXIsIHdpbmRvdy5nYW1lQ29uZmlnLnNvdXJjZSlcclxuICAgIHN0ZXBWaXN1YWxpemVyLnNldFBsYXllclRleHQodGhpcy5vcHBvbmVudCwgd2luZG93LmdhbWVDb25maWcuc291cmNlKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSByZXR1cm4gdGhpcy5jb21wb25lbnRcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtYWluJylcclxuICAgIG1haW4uY2xhc3NOYW1lID0gJ21haW4nXHJcbiAgICBtYWluLmlubmVySFRNTCA9IGBcclxuICAgICAgJHt0aGlzLmJ1dHRvbnNDb250YWluZXIuZ2V0Q29tcG9uZW50KCkub3V0ZXJIVE1MfVxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgICAgICAgJHt0aGlzLnRhc2tJbmZvLmdldENvbXBvbmVudCgpLm91dGVySFRNTH1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAke3RoaXMucGxheWVyVGV4dEJsb2NrLmdldENvbXBvbmVudCgpLm91dGVySFRNTH1cclxuICAgICAgICAke3RoaXMub3Bwb25lbnRUZXh0QmxvY2suZ2V0Q29tcG9uZW50KCkub3V0ZXJIVE1MfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJHt0aGlzLndpbm5lck1vZGFsLmdldENvbXBvbmVudCgpLm91dGVySFRNTH1cclxuICAgIGBcclxuICAgIHJldHVybiBtYWluXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJy4vY29tcG9uZW50cy9hcHAvQXBwLmpzJ1xyXG5pbXBvcnQgJy4vZ2xvYmFsLnNjc3MnXHJcblxyXG5hc3luYyBmdW5jdGlvbiBzdGFydCgpIHtcclxuICBjb25zdCBmZXRjaFVSTCA9ICcvZ2FtZV9jb25maWcnXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaChmZXRjaFVSTClcclxuICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICBjb25zb2xlLmxvZyhgXHJcbiAgICAgICAgRXJyb3IgJHtkYXRhLnN0YXR1c306ICR7ZGF0YS5zdGF0dXNUZXh0fVxyXG4gICAgICBgKVxyXG4gICAgICB0aHJvdyBFcnJvcihkYXRhLnN0YXR1c1RleHQpXHJcbiAgICB9XHJcbiAgICB3aW5kb3cuZ2FtZUNvbmZpZyA9IGF3YWl0IGRhdGEuanNvbigpXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcihlKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgYXBwID0gbmV3IEFwcCgpXHJcbiAgYXBwLnN0YXJ0KClcclxufVxyXG5cclxuc3RhcnQoKVxyXG4iXSwibmFtZXMiOlsiU3RlcFZpc3VhbGl6ZXIiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJwbGF5ZXJDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvcHBvbmVudENvbnRhaW5lciIsInBsYXllck5hbWUiLCJvcHBvbmVudE5hbWUiLCJwbGF5ZXJJbmZvIiwib3Bwb25lbnRJbmZvIiwicGxheWVyVGV4dCIsIm9wcG9uZW50VGV4dCIsInNldFBsYXllclRleHQiLCJwbGF5ZXJOdW0iLCJ0ZXh0IiwicGxheWVyTGV0dGVycyIsInNwbGl0IiwiaW5uZXJIVE1MIiwiaSIsImxlbmd0aCIsImxldHRlckhUTUwiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJvcHBvbmVudExldHRlcnMiLCJzZXRQbGF5ZXJOYW1lcyIsInRleHRDb250ZW50Iiwic2V0UGxheWVyU3RlcEluZm8iLCJzdGVwIiwibWVzc2FnZSIsImNvbG9yIiwiaGlnaGxpZ2h0UGxheWVyVGV4dCIsImRhdGFzZXQiLCJoaWdobGlnaHRQbGF5ZXJMZXR0ZXJzIiwicG9zaXRpb24iLCJjb3VudCIsImN1cnJlbnRQb3MiLCJzZWxlY3RvciIsImxldHRlciIsInNldFRpbWVvdXQiLCJTdGVwQ29udHJvbGxlciIsInJlbmRlcmVyIiwic2V0U3RlcCIsInN0ZXBEYXRhIiwiZ2V0U3RlcERhdGEiLCJ0eXBlTW92ZSIsInN0YXJ0U3RlcCIsImxlbmd0aFN0ZXAiLCJtb3ZlUmVzdWx0Iiwib3V0T2ZCb3VuZHNTdGVwIiwiZ2V0Q2hhclN0ZXAiLCJzZXRDaGFyU3RlcCIsImRlbGV0ZUNoYXJzU3RlcCIsIm5vdEZvdW5kU3RlcCIsImZpbmRTdHJTdGVwIiwiaW5zQ2hhclN0ZXAiLCJ3aW5kb3ciLCJnYW1lQ29uZmlnIiwicGxheWVyU3RlcHMiLCJvcHBvbmVudFN0ZXBzIiwibGVuZ3RoU3RlcE1lc3NhZ2UiLCJnZXRDaGFyU3RlcE1lc3NhZ2UiLCJzZXRDaGFyU3RlcE1lc3NhZ2UiLCJzdGVwRGF0YVByZXYiLCJkZWxldGVDaGFyc1N0ZXBNZXNzYWdlIiwiZmluZFN0clN0ZXBNZXNzYWdlIiwiaW5zQ2hhclN0ZXBNZXNzYWdlIiwiV2lubmVyTW9kYWwiLCJ3aW5uZXJzIiwiY29tcG9uZW50IiwiZ2V0Q29tcG9uZW50IiwiZ2V0V2lubmVySFRNTCIsInBsYXllcklkIiwib3Bwb25lbnRJZCIsIndpbm5lck5hbWUiLCJsb3Nlck5hbWUiLCJ3aW5IVE1MIiwiZHJhd0hUTUwiLCJsb3NlSFRNTCIsIm9wZW4iLCJ3aW5uZXJNb2RhbCIsInN0eWxlIiwiZGlzcGxheSIsImNsb3NlQnRuIiwib25jbGljayIsImNsb3NlIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NOYW1lIiwiQnV0dG9uVmlzdWFsaXplciIsInJld2luZEJ1dHRvbiIsInByZXZCdXR0b24iLCJwbGF5QnV0dG9uIiwibmV4dEJ1dHRvbiIsImZvcndhcmRCdXR0b24iLCJ0b29sdGlwUGxheSIsInRvb2x0aXBQYXVzZSIsInRvb2x0aXBSZXN0YXJ0IiwiaWNvblBsYXkiLCJpY29uUGF1c2UiLCJpY29uUmVzdGFydCIsInNldEJ1dHRvbnNEaXNhYmlsaXR5Iiwic2lkZSIsInN0YXRlIiwiZGlzYWJsZWQiLCJzZXRQbGF5QnV0dG9uSWNvbiIsImljb25UeXBlIiwicGxheVN0YXRlIiwicGF1c2VTdGF0ZSIsInJlc3RhcnRTdGF0ZSIsIm5vbmUiLCJpbmxpbmVCbG9jayIsInN0YXR1cyIsIkJ1dHRvbkhhbmRsZXIiLCJwbGF5ZXIiLCJvcHBvbmVudCIsInBsYXllclN0ZXAiLCJvcHBvbmVudFN0ZXAiLCJ0aW1lckRlbGF5IiwidGltZXJJRCIsInN0ZXBzQ291bnQiLCJsYXN0UGxheWVyU3RlcCIsImxhc3RPcHBvbmVudFN0ZXAiLCJtYXhOdW1iZXJPZlN0ZXBzIiwibWF4U3RlcHMiLCJzdGVwQ29udHJvbGxlciIsInZpc3VhbGl6ZXIiLCJoYW5kbGVFdmVudCIsImV2ZW50IiwidHlwZSIsInJld2luZCIsInRhcmdldCIsImNsb3Nlc3QiLCJwcmV2IiwicGxheSIsIm5leHQiLCJmb3J3YXJkIiwicGF1c2UiLCJyZXN0YXJ0Iiwic2V0QnV0dG9uc1N0YXRlIiwic2V0R2FtZVN0ZXAiLCJzZXRHYW1lRmluaXNoVmlzaWJpbGl0eSIsIm1heE51bWJlck9mU3RlcHNFeGNlZWRNZXNzYWdlIiwidGFza0VuZE1lc3NhZ2UiLCJwbGF5ZXJGaW5pc2giLCJ2aXNpYmlsaXR5Iiwib3Bwb25lbnRGaW5pc2giLCJpc0ZpbmlzaGVkIiwicGxheWVyQ3VycmVudFN0ZXAiLCJvcHBvbmVudEN1cnJlbnRTdGVwIiwiaW50ZXJ2YWxJRCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImRlY3JlYXNlUGxheWVyU3RlcCIsImRlY3JlYXNlT3Bwb25lbnRTdGVwIiwiQnV0dG9uSWNvbiIsImdldEljb25IVE1MIiwiQnV0dG9uc0NvbnRhaW5lciIsImJ1dHRvbnNDb250YWluZXIiLCJnZXRSZXdpbmRCdXR0b24iLCJvdXRlckhUTUwiLCJnZXRQcmV2QnV0dG9uIiwiZ2V0UGxheUJ1dHRvbiIsImdldE5leHRCdXR0b24iLCJnZXRGb3J3YXJkQnV0dG9uIiwicHJldkJ0biIsIm5leHRCdG4iLCJyZXdpbmRCdG4iLCJmb3J3YXJkQnRuIiwicGxheUJ0biIsIlBsYXllclRleHQiLCJwbGF5ZXJOdW1iZXIiLCJwbGF5ZXJTdHIiLCJUYXNrSW5mbyIsIm51bWJlck9mVGFzayIsInRhc2tJbmZvIiwiQXBwIiwicGxheWVyVGV4dEJsb2NrIiwib3Bwb25lbnRUZXh0QmxvY2siLCJzdGFydCIsImJvZHkiLCJhcHBlbmQiLCJhZGRFdmVudExpc3RlbmVyIiwic3RlcFZpc3VhbGl6ZXIiLCJzb3VyY2UiLCJtYWluIiwiYXN5bmMiLCJkYXRhIiwiZmV0Y2giLCJvayIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXNUZXh0IiwiRXJyb3IiLCJqc29uIiwiZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==